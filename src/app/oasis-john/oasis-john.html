<!-- COPILOT PAGE -->
<div id="copilot-page" class="hidden">
  <!-- Header Component -->
  <app-oasis-header
    [patientName]="'John Smith'"
    [patientMrn]="'MRN-87654'"
    [assessmentType]="'Start of Care'"
    [currentPayment]="currentPayment()"
    [itemsAccepted]="itemsAccepted()"
    [totalItems]="totalItems()"
    [hasAnalyzerAlerts]="hasAnalyzerAlerts"
    [newAnalyzerAlertCount]="newAnalyzerAlertCount"
    [showAnalyzer]="showAnalyzer()"
    [isSavingAssessment]="isSavingAssessment()"
    (onBackToDashboard)="handleBackToDashboard()"
    (onQuickEligibilityCheck)="handleQuickEligibilityCheck($event)"
    (onToggleAnalyzer)="handleToggleAnalyzer()"
    (onSaveAssessment)="handleSaveAssessment()"
    (onReset)="handleReset()"
    (onExport)="handleExport()"
  ></app-oasis-header>

  <main class="grid grid-cols-12" style="margin: 15px">
    <!-- LEFT COLUMN - Recommendations Component -->
    <app-oasis-recommendations
      class="block col-span-3"
      [recommendations]="aiRecommendations()"
      [analyzerAlerts]="analyzerAlerts()"
      [showAnalyzer]="showAnalyzer()"
      [selectedAlertId]="selectedAlertId()"
      (onRecommendationSelect)="handleRecommendationSelect($event)"
      (onRecommendationAccept)="handleRecommendationAccept($event)"
      (onRecommendationReject)="handleRecommendationReject($event)"
      (onRecommendationUndo)="handleRecommendationUndo($event)"
      (onAlertClick)="handleAlertClick($event)"
      (onAlertStatusChange)="handleAlertStatusChange($event)"
    ></app-oasis-recommendations>

    <!-- CENTER COLUMN - Document Viewer Component -->
    <app-oasis-document-viewer
      class="block col-span-6"
      [activeDocId]="activeDocId()"
      [highlightEvidence]="highlightEvidence()"
      [availableDocs]="availableDocs()"
    >
      <!--
        NOTE: Insert the document content here from the original oasis-john.html
        Lines approximately 406-1427 containing:
        - <div id="discharge-doc" class="document-content space-y-6">...</div>
        - <div id="referral-doc" class="document-content hidden space-y-6">...</div>
        - <div id="visit-doc" class="document-content hidden space-y-6">...</div>

        These large document sections should be copied from the original template
        into this ng-content slot to keep this file manageable.
      -->
      <div id="discharge-doc" class="document-content space-y-6" *ngIf="availableDocs().has('discharge-doc')">
        <!-- PDF Page 1 -->
        <div
          class="pdf-page bg-white shadow-lg mx-auto p-12 border border-slate-300"
          style="width: 8.5in; min-height: 11in"
        >
          <div class="text-xs text-slate-400 mb-6 text-right">Page 1 of 2</div>

          <!-- Header -->
          <div class="flex items-start justify-between mb-6 pb-4 border-b-2 border-slate-800">
            <div>
              <h3 class="font-bold text-xl mb-1 text-slate-900">Jackson Memorial Hospital</h3>
              <p class="text-xs text-slate-600">
                1611 NW 12th Avenue • Miami, FL 33136 • (305) 585-1111
              </p>
            </div>
            <div class="text-right">
              <p class="font-bold text-sm text-slate-900">DISCHARGE SUMMARY</p>
              <p class="text-xs text-slate-600">Medical Record</p>
            </div>
          </div>

          <!-- Patient Info -->
          <div class="space-y-4 text-sm text-slate-800 leading-relaxed">
            <div class="grid grid-cols-2 gap-4 bg-slate-50 p-3 rounded">
              <div><strong>Patient Name:</strong> John Robert Smith</div>
              <div><strong>MRN:</strong> MRN-87654</div>
              <div><strong>Date of Birth:</strong> 09/03/1958 (Age: 66)</div>
              <div><strong>Gender:</strong> Male</div>
              <div><strong>Admission Date:</strong> 09/24/2024</div>
              <div><strong>Discharge Date:</strong> 10/01/2024</div>
              <div><strong>Length of Stay:</strong> 7 days</div>
              <div><strong>Attending Physician:</strong> Dr. James Rodriguez, MD</div>
              <div><strong>Primary Care Physician:</strong> Dr. Michael Thompson, DO</div>
              <div><strong>Insurance:</strong> Medicare Advantage (MCR-876543210)</div>
            </div>

            <!-- Primary Diagnosis -->
            <div>
              <p class="font-bold text-slate-900 mb-2 uppercase text-xs tracking-wide">
                Primary Diagnosis
              </p>
              <ul class="list-decimal pl-5 space-y-1 text-sm">
                <li>
                  <span
                    data-evidence-for="I8000-primary"
                    class="hover:bg-yellow-100 transition-colors"
                  >
                    Acute cerebrovascular accident (CVA), right middle cerebral artery distribution
                    with left-sided hemiparesis (ICD-10: I63.511)
                  </span>
                </li>
                <li>
                  <span
                    data-evidence-for="I8000-respiratory"
                    class="hover:bg-yellow-100 transition-colors"
                  >
                    Acute respiratory failure, hypoxemic (ICD-10: J96.01)
                  </span>
                </li>
                <li>
                  <span
                    data-evidence-for="I8000-aspiration"
                    class="hover:bg-yellow-100 transition-colors"
                  >
                    Aspiration pneumonia, right lower lobe (ICD-10: J69.0)
                  </span>
                </li>
              </ul>
            </div>

            <!-- Secondary Diagnoses -->
            <div>
              <p class="font-bold text-slate-900 mb-2 uppercase text-xs tracking-wide">
                Secondary Diagnoses
              </p>
              <ul class="list-disc pl-5 space-y-1 text-sm">
                <li>
                  <span data-evidence-for="I8000-htn" class="hover:bg-yellow-100 transition-colors">
                    Hypertension, uncontrolled (ICD-10: I10)
                  </span>
                </li>
                <li>
                  <span
                    data-evidence-for="I8000-diabetes"
                    class="hover:bg-yellow-100 transition-colors"
                  >
                    Type 2 Diabetes Mellitus with diabetic neuropathy (ICD-10: E11.40)
                  </span>
                </li>
                <li>Hyperlipidemia (ICD-10: E78.5)</li>
                <li>
                  <span data-evidence-for="I8000-cad" class="hover:bg-yellow-100 transition-colors">
                    Coronary artery disease, stable (ICD-10: I25.10)
                  </span>
                </li>
                <li>History of tobacco use disorder (ICD-10: Z87.891)</li>
                <li>Chronic kidney disease, Stage 2 (ICD-10: N18.2)</li>
                <li>Benign prostatic hyperplasia (ICD-10: N40.0)</li>
                <li>
                  <span
                    data-evidence-for="I8000-dysphagia"
                    class="hover:bg-yellow-100 transition-colors"
                  >
                    Dysphagia secondary to stroke (ICD-10: R13.19)
                  </span>
                </li>
              </ul>
            </div>

            <!-- Chief Complaint -->
            <div>
              <p class="font-bold text-slate-900 mb-2 uppercase text-xs tracking-wide">
                Chief Complaint
              </p>
              <p>
                Patient was brought to the Emergency Department by EMS after being found by his wife
                with sudden onset left-sided weakness, facial droop, and slurred speech at
                approximately 7:15 AM. Last known well was approximately 11:00 PM the night prior.
              </p>
            </div>

            <!-- History of Present Illness -->
            <div>
              <p class="font-bold text-slate-900 mb-2 uppercase text-xs tracking-wide">
                History of Present Illness
              </p>
              <p>
                Mr. Smith is a 66-year-old male with past medical history of uncontrolled
                hypertension, type 2 diabetes, hyperlipidemia, coronary artery disease, and former
                tobacco use who presented on 09/24/2024 with acute neurological deficits. On EMS
                arrival, he had left facial droop, dysarthria, left arm drift, and left leg weakness
                with NIHSS score of 12.
              </p>
              <p>
                In the ED, NIHSS was 14. CT head showed no hemorrhage. CTA revealed occlusion of the
                right M1 segment of the MCA. He was not a candidate for tPA due to unknown onset
                time but underwent mechanical thrombectomy with successful recanalization (TICI 2b).
              </p>
            </div>
          </div>
        </div>

        <!-- PDF Page 2 -->
        <div
          class="pdf-page bg-white shadow-lg mx-auto p-12 border border-slate-300"
          style="width: 8.5in; min-height: 11in"
        >
          <div class="text-xs text-slate-400 mb-6 text-right">Page 2 of 2</div>
          <div class="space-y-4 text-sm text-slate-800 leading-relaxed">
            <!-- Hospital Course -->
            <div>
              <p class="font-bold text-slate-900 mb-2 uppercase text-xs tracking-wide">
                Hospital Course
              </p>
              <p>
                <strong>Neurological:</strong>
                Following thrombectomy, MRI confirmed a right MCA territory infarct (~35cc). NIHSS
                improved from 14 on admission to 8 at discharge. Patient has persistent left-sided
                weakness with upper extremity strength approximately 3/5 and lower extremity 4-/5
                and mild left-sided neglect.
              </p>
              <p>
                <strong>Pulmonary:</strong>
                On hospital day 2, patient developed hypoxemia and fever. Chest X-ray showed right
                lower lobe infiltrate consistent with
                <span
                  data-evidence-for="I8000-aspiration"
                  class="hover:bg-yellow-100 transition-colors"
                >
                  aspiration pneumonia
                </span>
                . He completed 7 days of IV antibiotics with clinical improvement and is now on room
                air.
              </p>
              <p>
                <strong>Swallowing/Nutrition:</strong>
                VFSS showed moderate-to-severe oropharyngeal
                <span
                  data-evidence-for="I8000-dysphagia"
                  class="hover:bg-yellow-100 transition-colors"
                >
                  dysphagia with silent aspiration of thin liquids
                </span>
                . Patient was placed on a modified diet: pureed solids and nectar-thick liquids only
                with aspiration precautions. He requires assistance and supervision for all meals.
              </p>
              <p>
                <strong>Functional Status:</strong>
                Physical and occupational therapy documented significant left hemiparesis. Patient
                requires moderate to maximal assistance for transfers, ambulation, dressing,
                bathing, and toileting. He can ambulate only short distances (25–50 feet) with a
                rolling walker and moderate assistance and is wheelchair dependent for community
                mobility.
              </p>
            </div>

            <!-- Discharge Vital Signs -->
            <div>
              <p class="font-bold text-slate-900 mb-2 uppercase text-xs tracking-wide">
                Discharge Vital Signs
              </p>
              <div class="bg-amber-50 border-l-4 border-amber-400 p-3 rounded">
                <div class="grid grid-cols-2 gap-2 text-sm">
                  <div><strong>Blood Pressure:</strong> 134/82 mmHg</div>
                  <div><strong>Heart Rate:</strong> 78 bpm</div>
                  <div><strong>Respiratory Rate:</strong> 16 breaths/min</div>
                  <div><strong>Oxygen Saturation:</strong> 96% on room air</div>
                  <div><strong>Temperature:</strong> 98.2°F</div>
                  <div><strong>Weight:</strong> 192 lbs</div>
                </div>
              </div>
            </div>

            <!-- Discharge Disposition -->
            <div>
              <p class="font-bold text-slate-900 mb-2 uppercase text-xs tracking-wide">
                Discharge Disposition
              </p>
              <p><strong>Discharged to:</strong> Home with Home Health Services</p>
              <p>
                <strong>Condition at Discharge:</strong>
                Alert and oriented, hemodynamically stable, breathing comfortably on room air.
                Persistent left hemiparesis (UE 3/5, LE 4-/5), moderate assistance required for most
                ADLs, high risk for falls, and ongoing dysphagia requiring modified diet and strict
                aspiration precautions.
              </p>
            </div>

            <div class="text-xs text-slate-500 mt-6">
              <p>
                <strong>Prepared by:</strong> Dr. James Rodriguez, MD (Hospitalist) • Electronically
                signed 10/01/2024 16:45
              </p>
            </div>

            <div class="text-center text-xs text-slate-400 italic mt-8">
              -- End of Discharge Summary --
            </div>
          </div>
        </div>
      </div>

      <!-- Referral/Orders (Hidden initially) -->
      <div id="referral-doc" class="document-content hidden space-y-6" *ngIf="availableDocs().has('referral-doc')">
        <!-- PDF Page 1 -->
        <div
          class="pdf-page bg-white shadow-lg mx-auto p-12 border border-slate-300"
          style="width: 8.5in; min-height: 11in"
        >
          <div class="text-xs text-slate-400 mb-6 text-right">Page 1 of 1</div>

          <!-- Header -->
          <div class="flex items-start justify-between mb-6 pb-4 border-b-2 border-slate-800">
            <div>
              <h3 class="font-bold text-xl mb-1 text-slate-900">Jackson Memorial Hospital</h3>
              <p class="text-xs text-slate-600">
                1611 NW 12th Avenue • Miami, FL 33136 • (305) 585-1111
              </p>
            </div>
            <div class="text-right">
              <p class="font-bold text-sm text-slate-900">HOME HEALTH REFERRAL</p>
              <p class="text-xs text-slate-600">Physician Orders</p>
            </div>
          </div>

          <div class="space-y-4 text-sm text-slate-800 leading-relaxed">
            <!-- Patient / Ordering Info -->
            <div class="grid grid-cols-2 gap-4 bg-slate-50 p-3 rounded">
              <div><strong>Patient:</strong> John Robert Smith</div>
              <div><strong>MRN:</strong> MRN-87654</div>
              <div><strong>DOB:</strong> 09/03/1958</div>
              <div><strong>Ordering Physician:</strong> Dr. James Rodriguez, MD</div>
              <div><strong>Primary Care Physician:</strong> Dr. Michael Thompson, DO</div>
              <div><strong>Date of Referral:</strong> 10/01/2024</div>
              <div><strong>Agency:</strong> Sunrise Home Health Agency</div>
              <div><strong>Start of Care:</strong> 10/02/2024</div>
            </div>

            <!-- Reason for Home Health -->
            <div>
              <p class="font-bold text-slate-900 mb-2 uppercase text-xs tracking-wide">
                Reason for Home Health Referral
              </p>
              <p class="bg-blue-50 p-3 rounded border-l-4 border-blue-500">
                <span
                  data-evidence-for="I8000-primary"
                  class="hover:bg-yellow-100 transition-colors"
                >
                  Recent acute ischemic stroke in right MCA territory with left hemiparesis and
                  dysphagia
                </span>
                requiring intensive rehabilitation, medication management, and strict aspiration and
                fall precautions in the home setting.
              </p>
            </div>

            <!-- Disciplines Ordered -->
            <div>
              <p class="font-bold text-slate-900 mb-2 uppercase text-xs tracking-wide">
                Disciplines Ordered
              </p>
              <ul class="list-disc pl-5 space-y-1 text-sm">
                <li>
                  <strong>Skilled Nursing:</strong>
                  3x/week for 4 weeks, then 2x/week — neurological assessment, stroke education,
                  blood pressure and blood glucose monitoring, medication reconciliation, monitoring
                  for bleeding on dual antiplatelet therapy, aspiration precautions, skin integrity,
                  and caregiver training.
                </li>
                <li>
                  <strong>Physical Therapy:</strong>
                  3x/week for 8 weeks — gait training, strengthening of left upper and lower
                  extremities, balance training, fall prevention, transfer training, and wheelchair
                  mobility.
                </li>
                <li>
                  <strong>Occupational Therapy:</strong>
                  2–3x/week for 8 weeks — ADL retraining, left-sided neglect strategies, one-handed
                  techniques for dressing/grooming/eating, home safety assessment, and adaptive
                  equipment training.
                </li>
                <li>
                  <strong>Speech Therapy:</strong>
                  2–3x/week for 6 weeks — swallow therapy, diet advancement as appropriate, safe
                  swallowing strategies, aspiration precautions, and cognitive-communication
                  therapy.
                </li>
                <li>
                  <strong>Home Health Aide:</strong>
                  5x/week — bathing, grooming, dressing, transfers, meal preparation, feeding
                  supervision, and light housekeeping related to patient care.
                </li>
              </ul>
            </div>

            <!-- Key Clinical Problems -->
            <div>
              <p class="font-bold text-slate-900 mb-2 uppercase text-xs tracking-wide">
                Active Problems Requiring Management
              </p>
              <ul class="list-disc pl-5 space-y-1 text-sm">
                <li>
                  <span
                    data-evidence-for="GG0170-mobility"
                    class="hover:bg-yellow-100 transition-colors"
                  >
                    Left hemiparesis with impaired balance and high fall risk — requires moderate to
                    maximal assistance for transfers and ambulation; wheelchair dependent for
                    community distances.
                  </span>
                </li>
                <li>
                  <span
                    data-evidence-for="I8000-dysphagia"
                    class="hover:bg-yellow-100 transition-colors"
                  >
                    Moderate-to-severe oropharyngeal dysphagia with silent aspiration of thin
                    liquids — requires pureed solids and nectar-thick liquids only with full
                    supervision and aspiration precautions.
                  </span>
                </li>
                <li>
                  <span
                    data-evidence-for="I8000-diabetes"
                    class="hover:bg-yellow-100 transition-colors"
                  >
                    Type 2 diabetes now managed on basal-bolus insulin regimen — requires blood
                    glucose monitoring before meals and at bedtime and ongoing insulin teaching.
                  </span>
                </li>
                <li>
                  <span data-evidence-for="I8000-htn" class="hover:bg-yellow-100 transition-colors">
                    Hypertension requiring strict BP control with Amlodipine and Lisinopril — goal
                    BP &lt;140/90.
                  </span>
                </li>
                <li>
                  Ongoing stroke prevention on dual antiplatelet therapy (Aspirin 325mg and
                  Clopidogrel 75mg for 21 days) with bleeding precautions.
                </li>
              </ul>
            </div>

            <!-- Durable Medical Equipment -->
            <div>
              <p class="font-bold text-slate-900 mb-2 uppercase text-xs tracking-wide">
                Durable Medical Equipment (DME)
              </p>
              <ul class="list-disc pl-5 space-y-1 text-sm">
                <li>Hospital bed (full electric with side rails)</li>
                <li>Standard wheelchair with elevating legrests</li>
                <li>Rolling walker with hand brakes</li>
                <li>Bedside commode and shower chair/transfer bench</li>
                <li>Raised toilet seat and recommended bathroom grab bars</li>
                <li>Blood glucose monitor and supplies</li>
                <li>Blood pressure monitor (automatic upper arm cuff)</li>
                <li>Thickener powder for liquid consistency modification</li>
              </ul>
            </div>

            <!-- Follow-up Appointments -->
            <div>
              <p class="font-bold text-slate-900 mb-2 uppercase text-xs tracking-wide">
                Follow-up Appointments
              </p>
              <ul class="list-disc pl-5 space-y-1 text-sm">
                <li>
                  PCP — Dr. Michael Thompson on 10/08/2024 at 2:00 PM for post-discharge follow-up
                  and medication review.
                </li>
                <li>
                  Neurology — Dr. Patricia Lee on 10/15/2024 at 10:30 AM for post-stroke follow-up
                  and antiplatelet management.
                </li>
                <li>
                  Endocrinology — Dr. Maria Gonzalez on 10/22/2024 at 9:00 AM for diabetes and
                  insulin management.
                </li>
              </ul>
            </div>

            <div class="mt-8 pt-4 border-t border-slate-300 text-xs text-slate-600 italic">
              Physician Signature: Dr. James Rodriguez, MD<br />
              Electronically signed on 10/01/2024 at 16:45
            </div>

            <div class="text-center text-xs text-slate-400 italic mt-6">
              -- End of Referral/Orders --
            </div>
          </div>
        </div>
      </div>

      <!-- First Visit Note (Hidden initially) -->
      <div id="visit-doc" class="document-content hidden space-y-6" *ngIf="availableDocs().has('visit-doc')">
        <!-- PDF Page 1 -->
        <div
          class="pdf-page bg-white shadow-lg mx-auto p-12 border border-slate-300"
          style="width: 8.5in; min-height: 11in"
        >
          <!-- Header -->
          <div class="mb-6 border-b-2 border-slate-800 pb-3">
            <h1 class="text-lg font-bold text-slate-900">HOME HEALTH VISIT NOTE</h1>
            <div class="text-xs text-slate-700 mt-2 space-y-1">
              <div class="flex justify-between">
                <span><strong>Patient:</strong> JOHN SMITH</span>
                <span><strong>DOB:</strong> 03/15/1945</span>
                <span><strong>MRN:</strong> MCR-876543210</span>
              </div>
              <div class="flex justify-between">
                <span><strong>Visit Date:</strong> January 24, 2024</span>
                <span><strong>Visit Type:</strong> Complete Assessment</span>
                <span><strong>Nurse:</strong> Maria Lopez, RN</span>
              </div>
              <div><strong>Agency:</strong> Riverside Home Care</div>
            </div>
          </div>

          <!-- Patient Verification -->
          <section class="mb-6">
            <h2 class="text-sm font-bold text-slate-800 mb-2">PATIENT VERIFICATION</h2>
            <div class="text-xs text-slate-700 space-y-1">
              <p><strong>Full Name:</strong> Samuel Robert JOHN</p>
              <p><strong>Medicare #:</strong> Ends in 3847 ✓</p>
              <p><strong>Start of Care Date:</strong> January 10, 2024</p>
              <p><strong>Primary Physician:</strong> Dr. Ramirez, Valley Medical Group</p>
            </div>
          </section>

          <!-- Vital Signs -->
          <section class="mb-6">
            <h2 class="text-sm font-bold text-slate-800 mb-2">VITAL SIGNS</h2>
            <div class="text-xs text-slate-700 grid grid-cols-2 gap-2">
              <p>
                <strong>Blood Pressure:</strong>
                <span
                  data-evidence-for="M1200-vitals"
                  class="text-red-700 font-semibold hover:bg-yellow-100 transition-colors"
                  >158/92 mmHg (Elevated)</span
                >
              </p>
              <p>
                <strong>Pulse:</strong>
                <span data-evidence-for="M1200-vitals" class="hover:bg-yellow-100 transition-colors"
                  >88 bpm (slightly irregular)</span
                >
              </p>
              <p>
                <strong>Temperature:</strong>
                <span data-evidence-for="M1200-vitals" class="hover:bg-yellow-100 transition-colors"
                  >98.2°F (Normal)</span
                >
              </p>
              <p>
                <strong>Oxygen Saturation:</strong>
                <span
                  data-evidence-for="M1200-vitals"
                  class="text-orange-700 font-semibold hover:bg-yellow-100 transition-colors"
                  >94% on room air (Borderline)</span
                >
              </p>
            </div>
          </section>

          <!-- Current Medications -->
          <section class="mb-6">
            <h2 class="text-sm font-bold text-slate-800 mb-2">CURRENT MEDICATIONS</h2>
            <div class="text-xs text-slate-700 space-y-1">
              <p>
                • <strong>Lisinopril 10mg:</strong>
                <span
                  data-evidence-for="M2020-medications"
                  class="hover:bg-yellow-100 transition-colors"
                  >Daily - Patient reports compliance issues (missed 1-2 doses this week)</span
                >
              </p>
              <p>
                • <strong>Metformin 1000mg:</strong>
                <span
                  data-evidence-for="M2020-medications"
                  class="hover:bg-yellow-100 transition-colors"
                  >BID - Taking as prescribed</span
                >
              </p>
              <p>
                • <strong>Furosemide 40mg:</strong>
                <span
                  data-evidence-for="M2020-medications"
                  class="hover:bg-yellow-100 transition-colors"
                  >Daily - Patient reports persistent edema despite medication</span
                >
              </p>
              <p class="text-orange-700 mt-2">
                <strong>⚠ Concern:</strong>
                <span
                  data-evidence-for="M2020-medications"
                  class="hover:bg-yellow-100 transition-colors"
                  >Medication non-compliance contributing to elevated BP</span
                >
              </p>
            </div>
          </section>

          <!-- Diagnoses -->
          <section class="mb-6">
            <h2 class="text-sm font-bold text-slate-800 mb-2">ACTIVE DIAGNOSES</h2>
            <div class="text-xs text-slate-700 space-y-1">
              <p>
                1.
                <span
                  data-evidence-for="I8000-hypertension"
                  class="hover:bg-yellow-100 transition-colors"
                  ><strong>Hypertension</strong> - Poorly controlled (BP 158/92)</span
                >
              </p>
              <p>
                2.
                <span
                  data-evidence-for="I8000-diabetes"
                  class="hover:bg-yellow-100 transition-colors"
                  ><strong>Type 2 Diabetes Mellitus</strong> - Patient reports inconsistent blood
                  glucose monitoring</span
                >
              </p>
              <p>
                3.
                <span data-evidence-for="I8000-ckd" class="hover:bg-yellow-100 transition-colors"
                  ><strong>Stage 3 Chronic Kidney Disease</strong></span
                >
              </p>
              <p>
                4.
                <span data-evidence-for="I8000-pad" class="hover:bg-yellow-100 transition-colors"
                  ><strong>Peripheral Arterial Disease</strong> - Documented during recent
                  hospitalization</span
                >
              </p>
              <p>
                5.
                <span data-evidence-for="I8000-wounds" class="hover:bg-yellow-100 transition-colors"
                  ><strong>Lower Extremity Wounds</strong> - Right ankle wound worsening</span
                >
              </p>
            </div>
          </section>

          <!-- Mobility Assessment -->
          <section class="mb-6">
            <h2 class="text-sm font-bold text-slate-800 mb-2">MOBILITY & FUNCTIONAL STATUS</h2>
            <div class="text-xs text-slate-700 space-y-2">
              <p>
                <strong>Gait Observation:</strong>
                <span
                  data-evidence-for="GG0170-mobility"
                  class="hover:bg-yellow-100 transition-colors"
                  >Patient walked to kitchen with slow, unsteady gait. Immediately reached for wall
                  support. Favoring right leg significantly.</span
                >
              </p>
              <p>
                <strong>Assistive Devices:</strong>
                <span
                  data-evidence-for="GG0170-mobility"
                  class="hover:bg-yellow-100 transition-colors"
                  >Walker available but patient reports inconsistent use ("sometimes I forget to use
                  it")</span
                >
              </p>
              <p>
                <strong>Pain Level:</strong>
                <span data-evidence-for="M1242-pain" class="hover:bg-yellow-100 transition-colors"
                  >6-7/10 while walking, especially right leg.
                  <span class="evidence-diagnosis">Pain relieved by rest</span> (claudication
                  pattern)</span
                >
              </p>
              <p>
                <strong>Fall Risk:</strong>
                <span data-evidence-for="J1800-falls" class="hover:bg-yellow-100 transition-colors"
                  >High - Near-fall in bathroom last week, grabbed towel bar.
                  <span class="text-red-700 font-semibold">Grab bars needed</span></span
                >
              </p>
            </div>
          </section>
        </div>

        <!-- PDF Page 2 -->
        <div
          class="pdf-page bg-white shadow-lg mx-auto p-12 border border-slate-300"
          style="width: 8.5in; min-height: 11in"
        >
          <!-- Lower Extremity Assessment - CRITICAL FOR ANALYZER ALERT -->
          <section class="mb-6" id="analyzer-toe">
            <h2
              class="text-sm font-bold text-slate-800 mb-2 bg-amber-50 px-2 py-1 border-l-4 border-amber-500"
            >
              LOWER EXTREMITY ASSESSMENT ⚠ CRITICAL FINDINGS
            </h2>
            <div class="text-xs text-slate-700 space-y-3 evidence-diagnosis">
              <div class="bg-amber-50 p-3 rounded border border-amber-200">
                <p class="font-bold text-amber-900 mb-2">CIRCULATION CONCERNS:</p>
                <p>
                  • <strong>Bilateral Edema:</strong>
                  <span
                    data-evidence-for="M1200-edema"
                    class="font-semibold text-red-700 hover:bg-yellow-100 transition-colors"
                    >+2 pitting edema in both ankles and feet. Indentation persists several seconds
                    after pressure.</span
                  >
                </p>
                <p>
                  • <strong>Temperature:</strong>
                  <span
                    data-evidence-for="M1200-circulation"
                    class="font-semibold hover:bg-yellow-100 transition-colors"
                    >Feet cool to touch bilaterally. Patient reports constant cold sensation, wears
                    two pairs of socks.</span
                  >
                </p>
                <p>
                  • <strong>Pedal Pulses:</strong>
                  <span
                    data-evidence-for="M1200-circulation"
                    class="font-semibold hover:bg-yellow-100 transition-colors"
                    >Faint but present bilaterally. Diminished compared to normal.</span
                  >
                </p>
                <p>
                  • <strong>Pain Pattern:</strong>
                  <span
                    data-evidence-for="M1242-pain"
                    class="font-semibold hover:bg-yellow-100 transition-colors"
                    >Pain with walking relieved by rest - consistent with claudication secondary to
                    PAD.</span
                  >
                </p>
              </div>

              <div class="bg-red-50 p-3 rounded border-2 border-red-400">
                <p class="font-bold text-red-900 mb-2">⚠ URGENT FINDING:</p>
                <p class="text-red-900">
                  <strong>Right Great Toe:</strong>
                  <span
                    data-evidence-for="I8000-toe"
                    class="font-bold hover:bg-yellow-100 transition-colors"
                    >Dark discoloration noted, patient reports onset ~1 week ago. Area appears
                    dusky/cyanotic. Patient reports intermittent throbbing pain, especially at
                    night.</span
                  >
                </p>
                <p class="text-red-700 mt-2 font-semibold">
                  <span data-evidence-for="I8000-toe" class="hover:bg-yellow-100 transition-colors"
                    >CLINICAL SIGNIFICANCE: Concerning for ischemia given PAD + diabetes. Risk for
                    tissue necrosis/amputation if not addressed promptly.</span
                  >
                </p>
              </div>

              <div class="bg-yellow-50 p-3 rounded border border-yellow-300">
                <p class="font-bold text-yellow-900 mb-2">WOUND STATUS:</p>
                <p>
                  • <strong>Right Ankle Wound:</strong>
                  <span
                    data-evidence-for="M1340-wounds"
                    class="hover:bg-yellow-100 transition-colors"
                    >Reports wound "opened up more" ~2 days ago. Clear fluid drainage noted. No foul
                    odor currently. Patient describes as "bigger wound" compared to smaller healed
                    lesion.</span
                  >
                </p>
              </div>
            </div>
          </section>

          <!-- Respiratory Assessment -->
          <section class="mb-6">
            <h2 class="text-sm font-bold text-slate-800 mb-2">RESPIRATORY STATUS</h2>
            <div class="text-xs text-slate-700 space-y-1">
              <p>
                <strong>Dyspnea:</strong>
                <span
                  data-evidence-for="M1400-dyspnea"
                  class="hover:bg-yellow-100 transition-colors"
                  >Shortness of breath with stairs - must stop halfway</span
                >
              </p>
              <p>
                <strong>Orthopnea:</strong>
                <span
                  data-evidence-for="M1400-dyspnea"
                  class="hover:bg-yellow-100 transition-colors"
                  >Now requires 3 pillows (increased from 1 pillow previously)</span
                >
              </p>
              <p>
                <strong>Paroxysmal Nocturnal Dyspnea:</strong>
                <span
                  data-evidence-for="M1400-dyspnea"
                  class="hover:bg-yellow-100 transition-colors"
                  >Occasional episodes waking at night</span
                >
              </p>
              <p>
                <strong>Chest Discomfort:</strong>
                <span data-evidence-for="M1242-pain" class="hover:bg-yellow-100 transition-colors"
                  >Reports "tightness" with overexertion</span
                >
              </p>
              <p class="text-orange-700 mt-2">
                <strong>Assessment:</strong>
                <span
                  data-evidence-for="M1400-dyspnea"
                  class="hover:bg-yellow-100 transition-colors"
                  >Possible volume overload despite diuretic therapy</span
                >
              </p>
            </div>
          </section>

          <!-- ADLs & Self-Care -->
          <section class="mb-6">
            <h2 class="text-sm font-bold text-slate-800 mb-2">ACTIVITIES OF DAILY LIVING</h2>
            <div class="text-xs text-slate-700 space-y-1">
              <p>
                <strong>Bathing:</strong>
                <span
                  data-evidence-for="GG0130-bathing"
                  class="hover:bg-yellow-100 transition-colors"
                  >Uses shower chair, requires assistance from daughter for safety</span
                >
              </p>
              <p>
                <strong>Dressing:</strong>
                <span
                  data-evidence-for="GG0130-dressing"
                  class="hover:bg-yellow-100 transition-colors"
                  >Independent but slow, difficulty with socks/shoes due to edema</span
                >
              </p>
              <p>
                <strong>Nutrition:</strong>
                <span
                  data-evidence-for="K0520-nutrition"
                  class="text-orange-700 font-semibold hover:bg-yellow-100 transition-colors"
                  >Poor appetite - "not eating much." Breakfast: toast + coffee only. Minimal intake
                  overall.</span
                >
              </p>
              <p>
                <strong>Meal Preparation:</strong>
                <span data-evidence-for="GG0130-meals" class="hover:bg-yellow-100 transition-colors"
                  >Primarily microwave meals. Daughter (Jennifer) brings groceries/prepared meals
                  2x/week</span
                >
              </p>
              <p>
                <strong>Bowel Function:</strong>
                <span data-evidence-for="M1610-bowel" class="hover:bg-yellow-100 transition-colors"
                  >Constipation - BM every 3 days with straining</span
                >
              </p>
              <p>
                <strong>Urination:</strong>
                <span
                  data-evidence-for="M1610-urinary"
                  class="hover:bg-yellow-100 transition-colors"
                  >Increased daytime frequency post-diuretic, decreased nocturia. No dysuria.</span
                >
              </p>
            </div>
          </section>

          <!-- Psychosocial -->
          <section class="mb-6">
            <h2 class="text-sm font-bold text-slate-800 mb-2">PSYCHOSOCIAL ASSESSMENT</h2>
            <div class="text-xs text-slate-700 space-y-1">
              <p>
                <strong>Mood:</strong>
                <span data-evidence-for="D0150-mood" class="hover:bg-yellow-100 transition-colors"
                  >Frustrated with loss of independence. "Some days are harder than others."</span
                >
              </p>
              <p>
                <strong>Sleep:</strong>
                <span data-evidence-for="D0150-mood" class="hover:bg-yellow-100 transition-colors"
                  >Poor - frequent wakening from pain and worry</span
                >
              </p>
              <p>
                <strong>Support System:</strong>
                <span
                  data-evidence-for="N0415-caregiver"
                  class="hover:bg-yellow-100 transition-colors"
                  >Daughter Jennifer (lives 20 minutes away) - primary caregiver, attends
                  appointments, provides meals and assistance</span
                >
              </p>
              <p>
                <strong>Safety:</strong>
                <span data-evidence-for="M2102-safety" class="hover:bg-yellow-100 transition-colors"
                  >Cell phone kept accessible. Emergency contacts posted on refrigerator ✓</span
                >
              </p>
            </div>
          </section>

          <!-- Assessment & Plan -->
          <section class="mb-6">
            <h2 class="text-sm font-bold text-slate-800 mb-2 bg-blue-50 px-2 py-1">
              NURSING ASSESSMENT & CARE PLAN
            </h2>
            <div class="text-xs text-slate-700 space-y-3">
              <div class="font-semibold text-blue-900">IDENTIFIED PROBLEMS:</div>
              <ol class="list-decimal ml-6 space-y-2">
                <li>
                  <strong>Impaired peripheral circulation</strong> - PAD with concerning toe
                  discoloration, cool extremities, diminished pulses, claudication
                </li>
                <li>
                  <strong>Wound deterioration</strong> - Right ankle wound worsening despite
                  previous treatment
                </li>
                <li>
                  <strong>Medication non-compliance</strong> - Contributing to uncontrolled
                  hypertension
                </li>
                <li>
                  <strong>Volume overload</strong> - Persistent edema, orthopnea, possible diuretic
                  resistance
                </li>
                <li><strong>Malnutrition risk</strong> - Poor appetite, inadequate intake</li>
                <li><strong>High fall risk</strong> - Gait instability, environmental hazards</li>
              </ol>

              <div class="bg-blue-50 p-3 rounded border border-blue-200 mt-3">
                <p class="font-bold text-blue-900 mb-2">INTERVENTIONS:</p>
                <p>
                  ✓ <strong>MD Notification:</strong> Contacted Dr. Ramirez's office regarding toe
                  discoloration - appointment expedited to this week (was scheduled for next month)
                </p>
                <p>
                  ✓ <strong>Visit Frequency:</strong> Increased to 3x/week for closer monitoring
                </p>
                <p>✓ <strong>Referrals Placed:</strong></p>
                <p class="ml-6">
                  - Physical Therapy: Gait training, circulation exercises, safe mobility
                </p>
                <p class="ml-6">- Dietitian: Nutritional counseling - will call within 24 hours</p>
                <p>✓ <strong>Patient Education Provided:</strong></p>
                <p class="ml-6">
                  - Foot care: Keep warm (no heating pads), elevate when sitting, toe/foot exercises
                  hourly
                </p>
                <p class="ml-6">- Medication compliance: Importance of daily BP medication</p>
                <p class="ml-6">- Warning signs: When to call 911 vs. agency</p>
                <p class="ml-6">- Written instructions left at bedside</p>
              </div>

              <div class="bg-red-50 p-3 rounded border-2 border-red-300 mt-3">
                <p class="font-bold text-red-900 mb-2">⚠ PATIENT/CAREGIVER WARNING SIGNS:</p>
                <p class="text-red-900">
                  <strong>Call 911 if:</strong> Chest pain, severe shortness of breath, sudden
                  confusion, toe becomes more painful or changes color further
                </p>
                <p class="text-orange-700">
                  <strong>Call Agency if:</strong> Wound drainage increases, fever develops,
                  swelling worsens significantly
                </p>
              </div>
            </div>
          </section>

          <!-- Plan for Next Visit -->
          <section class="mb-6">
            <h2 class="text-sm font-bold text-slate-800 mb-2">NEXT VISIT PLAN</h2>
            <div class="text-xs text-slate-700 space-y-1">
              <p><strong>Scheduled:</strong> Friday, January 26, 2024 @ 10:00 AM</p>
              <p>
                <strong>Focus:</strong> Wound assessment, circulation monitoring, walker compliance
                check, leg elevation compliance
              </p>
              <p>
                <strong>Goals:</strong> Improved medication adherence, stable/improved toe
                appearance, no fall incidents
              </p>
            </div>
          </section>

          <!-- Signature -->
          <div class="mt-8 pt-4 border-t-2 border-slate-300">
            <div class="text-xs text-slate-700">
              <p><strong>Documented by:</strong> Maria Lopez, RN</p>
              <p><strong>License:</strong> RN-FL-892456</p>
              <p><strong>Date/Time:</strong> January 24, 2024 - 11:45 AM</p>
              <p class="mt-2 text-slate-500 italic">Electronic signature on file</p>
            </div>
          </div>
        </div>
      </div>
    </app-oasis-document-viewer>

    <!-- RIGHT COLUMN - OASIS Form Component -->
    <app-oasis-form
      class="block col-span-3"
      [patientName]="'John Smith'"
      [itemsAccepted]="itemsAccepted()"
      [totalItems]="totalItems()"
      [currentPayment]="currentPayment()"
    >
      <section class="col-span-3 bg-white rounded-xl border border-slate-200 overflow-hidden">
        <div class="p-4 border-b bg-indigo-600">
          <h2 class="text-lg font-bold text-white">OASIS-E1 Assessment Form</h2>
          <p class="text-xs text-indigo-100 mt-1">Centers for Medicare & Medicaid Services</p>
        </div>
        <div class="overflow-y-auto h-[calc(100%-80px)] p-4 bg-slate-50">
          <!-- Patient Information Header -->
          <div class="bg-white border-2 border-slate-300 rounded-lg p-4 mb-4">
            <div class="grid grid-cols-2 gap-3 text-xs">
              <div>
                <label class="text-slate-500 text-[10px] uppercase">Patient Name</label>
                <p class="font-bold text-slate-900">Smith, John</p>
              </div>
              <div>
                <label class="text-slate-500 text-[10px] uppercase">MRN</label>
                <p class="font-bold text-slate-900">87654</p>
              </div>
              <div>
                <label class="text-slate-500 text-[10px] uppercase">DOB</label>
                <p class="font-bold text-slate-900">09/03/1958</p>
              </div>
              <div>
                <label class="text-slate-500 text-[10px] uppercase">Assessment Type</label>
                <p class="font-bold text-slate-900">01 - Start of Care</p>
              </div>
            </div>
          </div>

          <!-- Collapse/Expand All Controls -->
          <div class="flex justify-between items-center gap-2 mb-4">
            <button
              (click)="autofillDemoData()"
              class="px-3 py-1.5 text-xs font-medium text-white bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 rounded-lg shadow-md hover:shadow-lg transition-all flex items-center gap-1.5"
            >
              <ion-icon name="flash" class="text-sm"></ion-icon>
              Demo Autofill
            </button>
            <div class="flex gap-2">
              <button
                (click)="expandAllSections()"
                class="px-3 py-1.5 text-xs font-medium text-indigo-700 bg-indigo-50 hover:bg-indigo-100 rounded-lg border border-indigo-200 transition-colors flex items-center gap-1"
              >
                <ion-icon name="expand-outline" class="text-sm"></ion-icon>
                Expand All
              </button>
              <button
                (click)="collapseAllSections()"
                class="px-3 py-1.5 text-xs font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg border border-slate-300 transition-colors flex items-center gap-1"
              >
                <ion-icon name="contract-outline" class="text-sm"></ion-icon>
                Collapse All
              </button>
            </div>
          </div>

          <!-- ADMINISTRATIVE INFORMATION -->
          <div
            (click)="toggleSection('admin')"
            class="bg-blue-50 border-l-4 border-blue-600 px-3 py-2 mb-3 cursor-pointer hover:bg-blue-100 transition-colors flex items-center justify-between"
          >
            <h3 class="font-bold text-blue-900 text-xs uppercase tracking-wider">
              Administrative Information
            </h3>
            <ion-icon
              [name]="isSectionCollapsed('admin') ? 'chevron-down' : 'chevron-up'"
              class="text-blue-900 text-lg"
            ></ion-icon>
          </div>

          <div *ngIf="!isSectionCollapsed('admin')" class="bg-white border border-slate-300 rounded p-3 mb-4 space-y-3">
            <div>
              <label class="text-[11px] font-bold text-slate-700"
                >M0010. CMS Certification Number</label
              >
              <input
                type="text"
                value="55-9876"
                readonly
                class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs font-mono"
              />
            </div>

            <div>
              <label class="text-[11px] font-bold text-slate-700">M0014. Branch State</label>
              <select
                class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
              >
                <option value="">- Select State -</option>
                <option value="FL" selected>FL - Florida</option>
                <option value="CA">CA - California</option>
                <option value="TX">TX - Texas</option>
                <option value="NY">NY - New York</option>
              </select>
            </div>

            <div>
              <label class="text-[11px] font-bold text-slate-700">M0016. Branch ID Number</label>
              <input
                type="text"
                value="BR-001"
                class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
              />
            </div>

            <div>
              <label class="text-[11px] font-bold text-slate-700"
                >M0018. National Provider Identifier (NPI) - Attending Physician</label
              >
              <input
                type="text"
                value="1234567890"
                maxlength="10"
                class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs font-mono"
              />
            </div>

            <div>
              <label class="text-[11px] font-bold text-slate-700">M0020. Patient ID Number</label>
              <input
                type="text"
                value="PAT-87654"
                class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs font-mono"
              />
            </div>

            <div>
              <label class="text-[11px] font-bold text-slate-700">M0030. Start of Care Date</label>
              <input
                type="date"
                value="2024-11-16"
                class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
              />
            </div>

            <div>
              <label class="text-[11px] font-bold text-slate-700"
                >M0064. Social Security Number</label
              >
              <input
                type="text"
                placeholder="###-##-####"
                maxlength="11"
                class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs font-mono"
              />
            </div>

            <div>
              <label class="text-[11px] font-bold text-slate-700">M0066. Patient Birth Date</label>
              <input
                type="date"
                value="1958-09-03"
                class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
              />
            </div>

            <div>
              <label class="text-[11px] font-bold text-slate-700">M0069. Patient Gender</label>
              <select
                class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
              >
                <option value="">- Select -</option>
                <option value="1" selected>1 - Male</option>
                <option value="2">2 - Female</option>
              </select>
            </div>

            <div>
              <label class="text-[11px] font-bold text-slate-700"
                >M0080. Discipline of Person Completing Assessment</label
              >
              <select
                class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
              >
                <option value="">- Select -</option>
                <option value="1" selected>1 - RN</option>
                <option value="2">2 - PT</option>
                <option value="3">3 - SLP/ST</option>
                <option value="4">4 - OT</option>
              </select>
            </div>

            <div>
              <label class="text-[11px] font-bold text-slate-700"
                >M0090. Date Assessment Completed</label
              >
              <input
                type="date"
                value="2024-11-16"
                class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
              />
            </div>

            <div>
              <label class="text-[11px] font-bold text-slate-700"
                >M0100. Reason for Assessment</label
              >
              <select
                class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
              >
                <option selected>01 - Start of care - further visits planned</option>
                <option>03 - Resumption of care</option>
                <option>04 - Recertification</option>
                <option>05 - Other follow-up</option>
                <option>06 - Transferred to inpatient facility - not discharged</option>
                <option>07 - Transferred to inpatient facility - discharged</option>
                <option>08 - Death at home</option>
                <option>09 - Discharge from agency</option>
              </select>
            </div>

            <div>
              <label class="text-[11px] font-bold text-slate-700"
                >M0102. Date of Physician-Ordered Start of Care</label
              >
              <input
                type="date"
                value="2024-11-15"
                class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
              />
            </div>

            <div>
              <label class="text-[11px] font-bold text-slate-700">M0104. Date of Referral</label>
              <input
                type="date"
                value="2024-11-14"
                class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
              />
            </div>

            <div>
              <label class="text-[11px] font-bold text-slate-700"
                >M0150. Current Payment Sources for Home Care
                <span class="text-slate-500 font-normal">(Check all that apply)</span></label
              >
              <div class="mt-1 space-y-1">
                <label class="flex items-center text-xs">
                  <input type="checkbox" checked class="mr-2" /> 1 - Medicare (traditional
                  fee-for-service)
                </label>
                <label class="flex items-center text-xs">
                  <input type="checkbox" class="mr-2" /> 2 - Medicare (HMO/managed care/Advantage)
                </label>
                <label class="flex items-center text-xs">
                  <input type="checkbox" class="mr-2" /> 3 - Medicaid (traditional
                  fee-for-service)
                </label>
                <label class="flex items-center text-xs">
                  <input type="checkbox" class="mr-2" /> 4 - Medicaid (HMO/managed care)
                </label>
                <label class="flex items-center text-xs">
                  <input type="checkbox" class="mr-2" /> 5 - Workers' compensation
                </label>
                <label class="flex items-center text-xs">
                  <input type="checkbox" class="mr-2" /> 8 - Private insurance
                </label>
                <label class="flex items-center text-xs">
                  <input type="checkbox" class="mr-2" /> 10 - Self-pay
                </label>
              </div>
            </div>
          </div>

          <!-- DEMOGRAPHICS -->
          <div
            (click)="toggleSection('demographics')"
            class="bg-green-50 border-l-4 border-green-600 px-3 py-2 mb-3 cursor-pointer hover:bg-green-100 transition-colors flex items-center justify-between"
          >
            <h3 class="font-bold text-green-900 text-xs uppercase tracking-wider">
              Patient Demographics
            </h3>
            <ion-icon
              [name]="isSectionCollapsed('demographics') ? 'chevron-down' : 'chevron-up'"
              class="text-green-900 text-lg"
            ></ion-icon>
          </div>

          <div *ngIf="!isSectionCollapsed('demographics')" class="bg-white border border-slate-300 rounded p-3 mb-4 space-y-3">
            <div>
              <label class="text-[11px] font-bold text-slate-700">A1005. Ethnicity</label>
              <select
                class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
              >
                <option selected>0 - Not of Hispanic, Latino/Latina, or Spanish origin</option>
                <option>1 - Yes, Hispanic, Latino/Latina, or Spanish origin</option>
                <option>9 - Patient declines to respond</option>
              </select>
            </div>

            <div>
              <label class="text-[11px] font-bold text-slate-700"
                >A1010. Race (Check all that apply)</label
              >
              <div class="mt-1 space-y-1">
                <label class="flex items-center text-xs">
                  <input type="checkbox" class="mr-2" /> A - American Indian or Alaska Native
                </label>
                <label class="flex items-center text-xs">
                  <input type="checkbox" class="mr-2" /> B - Asian
                </label>
                <label class="flex items-center text-xs">
                  <input type="checkbox" class="mr-2" /> C - Black or African American
                </label>
                <label class="flex items-center text-xs">
                  <input type="checkbox" class="mr-2" /> D - Native Hawaiian/Pacific Islander
                </label>
                <label class="flex items-center text-xs">
                  <input type="checkbox" checked class="mr-2" /> E - White
                </label>
              </div>
            </div>

            <div>
              <label class="text-[11px] font-bold text-slate-700"
                >A1110A. Preferred Language</label
              >
              <select
                class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
              >
                <option selected>English</option>
                <option>Spanish</option>
                <option>Chinese</option>
                <option>French</option>
                <option>German</option>
                <option>Italian</option>
                <option>Portuguese</option>
                <option>Russian</option>
                <option>Tagalog</option>
                <option>Vietnamese</option>
                <option>Other (specify)</option>
              </select>
            </div>

            <div>
              <label class="text-[11px] font-bold text-slate-700"
                >A1110B. Need or Want an Interpreter?</label
              >
              <select
                class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
              >
                <option selected>0 - No</option>
                <option>1 - Yes</option>
                <option>8 - Patient declines to respond</option>
              </select>
            </div>

            <div>
              <label class="text-[11px] font-bold text-slate-700">A1250. Transportation</label>
              <p class="text-[10px] text-slate-600 mt-1 mb-1">
                Does the patient have a car, other vehicle, or public transportation to obtain
                health care?
              </p>
              <select
                class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
              >
                <option value="">- Select -</option>
                <option selected>0 - Yes, patient has transportation</option>
                <option>1 - No, patient does not have transportation</option>
                <option>9 - Patient declines to respond</option>
              </select>
            </div>

            <div>
              <label class="text-[11px] font-bold text-slate-700"
                >A1700. Cognitive, Behavioral, and Psychiatric Symptoms</label
              >
              <p class="text-[10px] text-slate-600 mt-1 mb-1">
                Are any of the symptoms demonstrated at least once a week? (Check all that apply)
              </p>
              <div class="mt-1 space-y-1">
                <label class="flex items-center text-xs">
                  <input type="checkbox" class="mr-2" /> A - Wandering
                </label>
                <label class="flex items-center text-xs">
                  <input type="checkbox" class="mr-2" /> B - Verbally abusive behavioral symptoms
                </label>
                <label class="flex items-center text-xs">
                  <input type="checkbox" class="mr-2" /> C - Physically abusive behavioral symptoms
                </label>
                <label class="flex items-center text-xs">
                  <input type="checkbox" class="mr-2" /> D - Disruptive behavioral symptoms
                </label>
                <label class="flex items-center text-xs">
                  <input type="checkbox" class="mr-2" /> E - Delusions
                </label>
                <label class="flex items-center text-xs">
                  <input type="checkbox" checked class="mr-2" /> F - None of the above
                </label>
              </div>
            </div>
          </div>

          <!-- SENSORY STATUS -->
          <div
            (click)="toggleSection('sensory')"
            class="bg-amber-50 border-l-4 border-amber-600 px-3 py-2 mb-3 cursor-pointer hover:bg-amber-100 transition-colors flex items-center justify-between"
          >
            <h3 class="font-bold text-amber-900 text-xs uppercase tracking-wider">
              Sensory Status
            </h3>
            <ion-icon
              [name]="isSectionCollapsed('sensory') ? 'chevron-down' : 'chevron-up'"
              class="text-amber-900 text-lg"
            ></ion-icon>
          </div>

          <div *ngIf="!isSectionCollapsed('sensory')" class="bg-white border border-slate-300 rounded p-3 mb-4 space-y-3">
            <div>
              <label class="text-[11px] font-bold text-slate-700">B1000. Vision</label>
              <p class="text-[10px] text-slate-600 mt-1 mb-1">
                Ability to see in adequate light (with glasses if used)
              </p>
              <select
                class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
              >
                <option value="">- Select -</option>
                <option selected>0 - Sees adequately; can see medication labels, newsprint</option>
                <option>1 - Sees large print, but not regular print</option>
                <option>2 - Sees large objects, but not small objects</option>
                <option>3 - Sees small objects poorly or not at all</option>
                <option>4 - No vision; unable to see</option>
                <option>9 - Patient declines to respond</option>
              </select>
            </div>

            <div>
              <label class="text-[11px] font-bold text-slate-700"
                >B1200. Hearing (with hearing aid if applicable)</label
              >
              <p class="text-[10px] text-slate-600 mt-1 mb-1">
                Ability to hear (with hearing aid if used)
              </p>
              <select
                class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
              >
                <option value="">- Select -</option>
                <option selected>
                  0 - No difficulty in normal conversation, social interaction, listening to TV
                </option>
                <option>
                  1 - Difficulty in some situations (e.g., when not facing speaker)
                </option>
                <option>
                  2 - Difficulty in many situations (speaker must increase volume and speak
                  distinctly)
                </option>
                <option>
                  3 - Difficulty in most/all situations (speaker must speak loudly and slowly)
                </option>
                <option>4 - Unable to hear in all situations</option>
                <option>9 - Patient declines to respond</option>
              </select>
            </div>
          </div>

          <!-- COGNITIVE PATTERNS -->
          <div
            (click)="toggleSection('cognitive')"
            class="bg-cyan-50 border-l-4 border-cyan-600 px-3 py-2 mb-3 cursor-pointer hover:bg-cyan-100 transition-colors flex items-center justify-between"
          >
            <h3 class="font-bold text-cyan-900 text-xs uppercase tracking-wider">
              Cognitive Patterns
            </h3>
            <ion-icon
              [name]="isSectionCollapsed('cognitive') ? 'chevron-down' : 'chevron-up'"
              class="text-cyan-900 text-lg"
            ></ion-icon>
          </div>

          <div *ngIf="!isSectionCollapsed('cognitive')" class="bg-white border border-slate-300 rounded p-3 mb-4 space-y-3">
            <div>
              <label class="text-[11px] font-bold text-slate-700"
                >C0100. Should Brief Interview for Mental Status (BIMS) be Conducted?</label
              >
              <select
                class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
              >
                <option value="">- Select -</option>
                <option>0 - No (patient is rarely/never understood)</option>
                <option selected>1 - Yes</option>
              </select>
            </div>

            <div class="bg-slate-50 p-3 rounded border border-slate-200">
              <p class="text-[10px] font-semibold text-slate-700 mb-2">
                BIMS Assessment (if C0100 = Yes)
              </p>

              <div class="space-y-2">
                <div>
                  <label class="text-[11px] font-bold text-slate-700"
                    >C0200. Repetition of Three Words (0-3)</label
                  >
                  <input
                    type="number"
                    min="0"
                    max="3"
                    value="3"
                    class="mt-1 block w-full px-2 py-1.5 bg-white border border-slate-300 rounded text-xs"
                  />
                </div>

                <div>
                  <label class="text-[11px] font-bold text-slate-700"
                    >C0300. Temporal Orientation (Score each: 0-4)</label
                  >
                  <div class="grid grid-cols-3 gap-2 mt-1">
                    <div>
                      <label class="text-[10px] text-slate-600">C0300A. Year</label>
                      <input
                        type="number"
                        min="0"
                        max="4"
                        value="4"
                        class="mt-0.5 block w-full px-2 py-1 bg-white border border-slate-300 rounded text-xs"
                      />
                    </div>
                    <div>
                      <label class="text-[10px] text-slate-600">C0300B. Month</label>
                      <input
                        type="number"
                        min="0"
                        max="4"
                        value="4"
                        class="mt-0.5 block w-full px-2 py-1 bg-white border border-slate-300 rounded text-xs"
                      />
                    </div>
                    <div>
                      <label class="text-[10px] text-slate-600">C0300C. Day</label>
                      <input
                        type="number"
                        min="0"
                        max="4"
                        value="3"
                        class="mt-0.5 block w-full px-2 py-1 bg-white border border-slate-300 rounded text-xs"
                      />
                    </div>
                  </div>
                </div>

                <div>
                  <label class="text-[11px] font-bold text-slate-700"
                    >C0400. Recall (Score each: 0-2)</label
                  >
                  <div class="grid grid-cols-3 gap-2 mt-1">
                    <div>
                      <label class="text-[10px] text-slate-600">C0400A. Word 1</label>
                      <input
                        type="number"
                        min="0"
                        max="2"
                        value="2"
                        class="mt-0.5 block w-full px-2 py-1 bg-white border border-slate-300 rounded text-xs"
                      />
                    </div>
                    <div>
                      <label class="text-[10px] text-slate-600">C0400B. Word 2</label>
                      <input
                        type="number"
                        min="0"
                        max="2"
                        value="2"
                        class="mt-0.5 block w-full px-2 py-1 bg-white border border-slate-300 rounded text-xs"
                      />
                    </div>
                    <div>
                      <label class="text-[10px] text-slate-600">C0400C. Word 3</label>
                      <input
                        type="number"
                        min="0"
                        max="2"
                        value="1"
                        class="mt-0.5 block w-full px-2 py-1 bg-white border border-slate-300 rounded text-xs"
                      />
                    </div>
                  </div>
                </div>

                <div>
                  <label class="text-[11px] font-bold text-slate-700"
                    >C0500. BIMS Summary Score (0-15)</label
                  >
                  <input
                    type="number"
                    readonly
                    value="14"
                    class="mt-1 block w-full px-2 py-1.5 bg-emerald-50 border border-emerald-300 rounded text-xs font-semibold"
                  />
                  <p class="text-[10px] text-emerald-700 mt-1">13-15 = Cognitively intact</p>
                </div>
              </div>
            </div>

            <div>
              <label class="text-[11px] font-bold text-slate-700"
                >C1310. Signs and Symptoms of Delirium</label
              >
              <div class="mt-2 space-y-2">
                <div>
                  <label class="text-[10px] font-medium text-slate-700"
                    >C1310A. Acute Onset Mental Status Change</label
                  >
                  <select
                    class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                  >
                    <option selected>0 - No</option>
                    <option>1 - Yes</option>
                  </select>
                </div>
                <div>
                  <label class="text-[10px] font-medium text-slate-700">C1310B. Inattention</label>
                  <select
                    class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                  >
                    <option selected>0 - Behavior not present</option>
                    <option>1 - Behavior present, fluctuates</option>
                    <option>2 - Behavior present, continuous</option>
                  </select>
                </div>
                <div>
                  <label class="text-[10px] font-medium text-slate-700"
                    >C1310C. Disorganized Thinking</label
                  >
                  <select
                    class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                  >
                    <option selected>0 - Behavior not present</option>
                    <option>1 - Behavior present, fluctuates</option>
                    <option>2 - Behavior present, continuous</option>
                  </select>
                </div>
                <div>
                  <label class="text-[10px] font-medium text-slate-700"
                    >C1310D. Altered Level of Consciousness</label
                  >
                  <select
                    class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                  >
                    <option selected>0 - Alert</option>
                    <option>1 - Vigilant</option>
                    <option>2 - Lethargic</option>
                    <option>3 - Stupor</option>
                    <option>4 - Coma</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <!-- MOOD AND BEHAVIOR PATTERNS -->
          <div
            (click)="toggleSection('mood')"
            class="bg-rose-50 border-l-4 border-rose-600 px-3 py-2 mb-3 cursor-pointer hover:bg-rose-100 transition-colors flex items-center justify-between"
          >
            <h3 class="font-bold text-rose-900 text-xs uppercase tracking-wider">
              Mood and Behavior Patterns
            </h3>
            <ion-icon
              [name]="isSectionCollapsed('mood') ? 'chevron-down' : 'chevron-up'"
              class="text-rose-900 text-lg"
            ></ion-icon>
          </div>

          <div *ngIf="!isSectionCollapsed('mood')" class="bg-white border border-slate-300 rounded p-3 mb-4 space-y-3">
            <div>
              <label class="text-[11px] font-bold text-slate-700"
                >D0150. Patient Health Questionnaire (PHQ-2 to 9)</label
              >
              <p class="text-[10px] text-slate-600 mt-1 mb-2">
                Over the last 2 weeks, how often have you been bothered by...
              </p>
              <div class="bg-slate-50 p-3 rounded space-y-2">
                <div class="text-[10px] text-slate-600 mb-2">
                  <strong>Scoring:</strong> 0=Not at all, 1=Several days, 2=More than half the
                  days, 3=Nearly every day
                </div>
                <div class="grid grid-cols-1 gap-2">
                  <div>
                    <label class="text-[10px] text-slate-700">D0150A1. Little interest or pleasure in doing things</label>
                    <input
                      type="number"
                      min="0"
                      max="3"
                      value="0"
                      class="mt-0.5 block w-full px-2 py-1 bg-white border border-slate-300 rounded text-xs"
                    />
                  </div>
                  <div>
                    <label class="text-[10px] text-slate-700">D0150A2. Feeling down, depressed, or hopeless</label>
                    <input
                      type="number"
                      min="0"
                      max="3"
                      value="1"
                      class="mt-0.5 block w-full px-2 py-1 bg-white border border-slate-300 rounded text-xs"
                    />
                  </div>
                  <div>
                    <label class="text-[10px] text-slate-700">D0150B3. Trouble falling or staying asleep</label>
                    <input
                      type="number"
                      min="0"
                      max="3"
                      value="1"
                      class="mt-0.5 block w-full px-2 py-1 bg-white border border-slate-300 rounded text-xs"
                    />
                  </div>
                  <div>
                    <label class="text-[10px] text-slate-700">D0150B4. Feeling tired or having little energy</label>
                    <input
                      type="number"
                      min="0"
                      max="3"
                      value="2"
                      class="mt-0.5 block w-full px-2 py-1 bg-white border border-slate-300 rounded text-xs"
                    />
                  </div>
                </div>
              </div>
            </div>

            <div>
              <label class="text-[11px] font-bold text-slate-700">D0160. PHQ-9 Total Severity Score</label>
              <input
                type="number"
                readonly
                value="4"
                class="mt-1 block w-full px-2 py-1.5 bg-yellow-50 border border-yellow-300 rounded text-xs font-semibold"
              />
              <p class="text-[10px] text-slate-600 mt-1">1-4 = Minimal depression</p>
            </div>
          </div>

          <!-- DIAGNOSES (AI-Populated) -->
          <div
            (click)="toggleSection('diagnoses')"
            class="bg-red-50 border-l-4 border-red-600 px-3 py-2 mb-3 cursor-pointer hover:bg-red-100 transition-colors flex items-center justify-between"
          >
            <h3 class="font-bold text-red-900 text-xs uppercase tracking-wider">
              Health Conditions - Diagnoses
            </h3>
            <ion-icon
              [name]="isSectionCollapsed('diagnoses') ? 'chevron-down' : 'chevron-up'"
              class="text-red-900 text-lg"
            ></ion-icon>
          </div>

          <div *ngIf="!isSectionCollapsed('diagnoses')" class="bg-white border border-slate-300 rounded p-3 mb-4 space-y-3">
            <!-- I8000 Primary Diagnosis -->
            <div>
              <label class="text-[11px] font-bold text-slate-700">
                I8000. Primary Diagnosis (ICD-10-CM)
                <span class="text-red-600 ml-1">*</span>
              </label>
              <div
                id="form-I8000-primary-answer"
                data-required="true"
                class="mt-1 p-2 bg-yellow-50 border-2 border-dashed border-yellow-400 rounded min-h-[40px] flex items-center justify-center text-slate-600 text-xs form-field-placeholder"
              >
                <ion-icon name="sparkles-outline" class="text-yellow-600 mr-2"></ion-icon>
                LANCE AI will populate the primary stroke diagnosis (I63.511) when you click
                "Accept" on a recommendation card.
              </div>
            </div>

            <!-- I8000 Comorbidity (High-Impact) -->
            <div>
              <label class="text-[11px] font-bold text-slate-700">
                I8000. Comorbidity (PDGM-Relevant)
                <span class="text-red-600 ml-1">*</span>
              </label>
              <div
                id="form-I8000-comorbidity-answer"
                data-required="true"
                class="mt-1 p-2 bg-yellow-50 border-2 border-dashed border-yellow-400 rounded min-h-[40px] flex items-center justify-center text-slate-600 text-xs form-field-placeholder"
              >
                <ion-icon name="sparkles-outline" class="text-yellow-600 mr-2"></ion-icon>
                Aspiration pneumonia (J69.0) will be added here when accepted from the AI
                recommendations panel.
              </div>
            </div>

            <!-- I8000 Other Diagnoses -->
            <div>
              <label class="text-[11px] font-bold text-slate-700">
                I8000. Other Diagnoses
                <span class="text-red-600 ml-1">*</span>
              </label>
              <div
                id="form-I8000-other-diagnoses-container"
                data-required="true"
                class="mt-1 space-y-2"
              >
                <!-- Other diagnoses will be added here dynamically -->
                <div
                  class="p-2 bg-yellow-50 border-2 border-dashed border-yellow-400 rounded min-h-[40px] flex items-center justify-center text-slate-600 text-xs form-field-placeholder"
                >
                  <ion-icon name="sparkles-outline" class="text-yellow-600 mr-2"></ion-icon>
                  LANCE AI will append additional diagnoses (e.g., dysphagia R13.19, diabetes
                  E11.40, hypertension I10) when you click "Accept" on those recommendation cards.
                </div>
              </div>
            </div>
          </div>

          <!-- SECTION J: HEALTH CONDITIONS -->
          <div
            (click)="toggleSection('health-conditions')"
            class="bg-rose-50 border-l-4 border-rose-600 px-3 py-2 mb-3 cursor-pointer hover:bg-rose-100 transition-colors flex items-center justify-between"
          >
            <h3 class="font-bold text-rose-900 text-xs uppercase tracking-wider">
              Section J. Health Conditions
            </h3>
            <ion-icon
              [name]="isSectionCollapsed('health-conditions') ? 'chevron-down' : 'chevron-up'"
              class="text-rose-900 text-lg"
            ></ion-icon>
          </div>

          <div *ngIf="!isSectionCollapsed('health-conditions')" class="bg-white border border-slate-300 rounded p-3 mb-4">
            <div class="space-y-3">
              <!-- J0510 Pain Effect on Sleep -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  J0510. Pain Effect on Sleep
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <select
                  id="J0510-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - Does not apply (no pain)</option>
                  <option value="1">1 - Pain does not interfere with sleep</option>
                  <option value="2">2 - Pain interferes with sleep</option>
                </select>
              </div>

              <!-- J1800 Any Falls Since SOC -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  J1800. Any Falls Since SOC/ROC
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <select
                  id="J1800-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - No</option>
                  <option value="1">1 - Yes</option>
                </select>
              </div>

              <!-- J1900 Number of Falls (conditional) -->
              <div id="J1900-container" class="pl-4 border-l-2 border-rose-300 space-y-2">
                <p class="text-[10px] text-slate-600 italic">
                  Complete if J1800 = Yes
                </p>
                <div>
                  <label class="text-[11px] font-bold text-slate-700">
                    J1900A. Number of Falls - No Injury
                  </label>
                  <input
                    type="number"
                    id="J1900A-input"
                    min="0"
                    max="99"
                    class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                    placeholder="0-99"
                  />
                </div>
                <div>
                  <label class="text-[11px] font-bold text-slate-700">
                    J1900B. Number of Falls - Injury (except major)
                  </label>
                  <input
                    type="number"
                    id="J1900B-input"
                    min="0"
                    max="99"
                    class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                    placeholder="0-99"
                  />
                </div>
                <div>
                  <label class="text-[11px] font-bold text-slate-700">
                    J1900C. Number of Falls - Major Injury
                  </label>
                  <input
                    type="number"
                    id="J1900C-input"
                    min="0"
                    max="99"
                    class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                    placeholder="0-99"
                  />
                  <p class="text-[9px] text-slate-500 mt-1">
                    Major injury: bone fractures, joint dislocations, closed head injury
                  </p>
                </div>
              </div>

              <!-- J2030 Dyspnea -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  J2030. Shortness of Breath (Dyspnea)
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <select
                  id="J2030-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - Not short of breath</option>
                  <option value="1">1 - When walking more than 20 feet, climbing stairs</option>
                  <option value="2">2 - With moderate exertion (dressing, using commode)</option>
                  <option value="3">3 - With minimal exertion or with ADLs</option>
                  <option value="4">4 - At rest (during day or night)</option>
                </select>
              </div>
            </div>
          </div>

          <!-- GG0100: PRIOR FUNCTIONING -->
          <div
            (click)="toggleSection('gg-prior')"
            class="bg-teal-50 border-l-4 border-teal-600 px-3 py-2 mb-3 cursor-pointer hover:bg-teal-100 transition-colors flex items-center justify-between"
          >
            <h3 class="font-bold text-teal-900 text-xs uppercase tracking-wider">
              GG0100. Prior Functioning: Everyday Activities
            </h3>
            <ion-icon
              [name]="isSectionCollapsed('gg-prior') ? 'chevron-down' : 'chevron-up'"
              class="text-teal-900 text-lg"
            ></ion-icon>
          </div>

          <div *ngIf="!isSectionCollapsed('gg-prior')" class="bg-white border border-slate-300 rounded p-3 mb-4">
            <p class="text-[10px] text-slate-600 mb-3 italic bg-teal-50 p-2 rounded">
              <strong>Instructions:</strong> Prior to the current illness, exacerbation, or injury,
              what was the patient's usual ability with everyday activities?
            </p>

            <div class="space-y-3">
              <!-- GG0100A Self-Care -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  GG0100A. Self-Care (Eating, Toileting, Hygiene)
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <select
                  id="GG0100A-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="3">3 - Independent</option>
                  <option value="2">2 - Needed some help</option>
                  <option value="1">1 - Dependent</option>
                  <option value="8">8 - Unknown</option>
                  <option value="9">9 - Not applicable</option>
                </select>
              </div>

              <!-- GG0100B Indoor Mobility -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  GG0100B. Indoor Mobility (Walking, Wheelchair)
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <select
                  id="GG0100B-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="3">3 - Independent</option>
                  <option value="2">2 - Needed some help</option>
                  <option value="1">1 - Dependent</option>
                  <option value="8">8 - Unknown</option>
                  <option value="9">9 - Not applicable</option>
                </select>
              </div>

              <!-- GG0100C Stairs -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  GG0100C. Stairs
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <select
                  id="GG0100C-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="3">3 - Independent</option>
                  <option value="2">2 - Needed some help</option>
                  <option value="1">1 - Dependent</option>
                  <option value="8">8 - Unknown</option>
                  <option value="9">9 - Not applicable</option>
                </select>
              </div>
            </div>
          </div>

          <!-- GG0110: PRIOR DEVICE USE -->
          <div
            (click)="toggleSection('gg-prior-device')"
            class="bg-cyan-50 border-l-4 border-cyan-600 px-3 py-2 mb-3 cursor-pointer hover:bg-cyan-100 transition-colors flex items-center justify-between"
          >
            <h3 class="font-bold text-cyan-900 text-xs uppercase tracking-wider">
              GG0110. Prior Device Use
            </h3>
            <ion-icon
              [name]="isSectionCollapsed('gg-prior-device') ? 'chevron-down' : 'chevron-up'"
              class="text-cyan-900 text-lg"
            ></ion-icon>
          </div>

          <div *ngIf="!isSectionCollapsed('gg-prior-device')" class="bg-white border border-slate-300 rounded p-3 mb-4">
            <p class="text-[10px] text-slate-600 mb-3 italic bg-cyan-50 p-2 rounded">
              <strong>Instructions:</strong> Did the patient use any of the following prior to the
              current illness, exacerbation, or injury? (Check all that apply)
            </p>

            <div class="space-y-2">
              <label class="flex items-center text-xs">
                <input type="checkbox" id="GG0110-A" class="mr-2" />
                <span>A - Manual wheelchair</span>
              </label>
              <label class="flex items-center text-xs">
                <input type="checkbox" id="GG0110-B" class="mr-2" />
                <span>B - Motorized wheelchair/scooter</span>
              </label>
              <label class="flex items-center text-xs">
                <input type="checkbox" id="GG0110-C" class="mr-2" />
                <span>C - Mechanical lift</span>
              </label>
              <label class="flex items-center text-xs">
                <input type="checkbox" id="GG0110-D" class="mr-2" />
                <span>D - Walker</span>
              </label>
              <label class="flex items-center text-xs">
                <input type="checkbox" id="GG0110-E" class="mr-2" />
                <span>E - Orthotics/prosthetics</span>
              </label>
              <label class="flex items-center text-xs">
                <input type="checkbox" id="GG0110-F" class="mr-2" />
                <span>F - None of the above</span>
              </label>
              <label class="flex items-center text-xs">
                <input type="checkbox" id="GG0110-Z" class="mr-2" />
                <span>Z - Unknown</span>
              </label>
            </div>
          </div>

          <!-- FUNCTIONAL ABILITIES: SELF-CARE (GG Section) -->
          <!-- FUNCTIONAL ABILITIES: SELF-CARE (GG Section) -->
          <div
            (click)="toggleSection('gg-selfcare')"
            class="bg-purple-50 border-l-4 border-purple-600 px-3 py-2 mb-3 cursor-pointer hover:bg-purple-100 transition-colors flex items-center justify-between"
          >
            <h3 class="font-bold text-purple-900 text-xs uppercase tracking-wider">
              GG0130. Self-Care (Admission Performance)
            </h3>
            <ion-icon
              [name]="isSectionCollapsed('gg-selfcare') ? 'chevron-down' : 'chevron-up'"
              class="text-purple-900 text-lg"
            ></ion-icon>
          </div>

          <div *ngIf="!isSectionCollapsed('gg-selfcare')" class="bg-white border border-slate-300 rounded p-3 mb-4">
            <p class="text-[10px] text-slate-600 mb-3 italic bg-purple-50 p-2 rounded">
              <strong>Coding:</strong> Code the patient's usual performance at admission. Use
              6-point scale: 06=Independent, 05=Setup help, 04=Supervision, 03=Partial assist,
              02=Substantial assist, 01=Dependent
            </p>

            <div class="space-y-3">
              <div>
                <label class="text-[11px] font-bold text-slate-700">GG0130A. Eating</label>
                <select
                  id="GG0130A-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option>06 - Independent</option>
                  <option>05 - Setup or clean-up assistance</option>
                  <option>04 - Supervision or touching assistance</option>
                  <option>03 - Partial/moderate assistance</option>
                  <option>02 - Substantial/maximal assistance</option>
                  <option>01 - Dependent</option>
                  <option>07 - Patient refused</option>
                  <option>09 - Not applicable</option>
                </select>
              </div>

              <div>
                <label class="text-[11px] font-bold text-slate-700">GG0130B. Oral Hygiene</label>
                <select
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option>06 - Independent</option>
                  <option>05 - Setup or clean-up assistance</option>
                  <option>04 - Supervision or touching assistance</option>
                  <option>03 - Partial/moderate assistance</option>
                  <option>02 - Substantial/maximal assistance</option>
                  <option>01 - Dependent</option>
                  <option>07 - Patient refused</option>
                  <option>09 - Not applicable</option>
                </select>
              </div>

              <div>
                <label class="text-[11px] font-bold text-slate-700"
                  >GG0130C. Toileting Hygiene</label
                >
                <select
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option>06 - Independent</option>
                  <option>05 - Setup or clean-up assistance</option>
                  <option>04 - Supervision or touching assistance</option>
                  <option>03 - Partial/moderate assistance</option>
                  <option>02 - Substantial/maximal assistance</option>
                  <option>01 - Dependent</option>
                  <option>07 - Patient refused</option>
                  <option>09 - Not applicable</option>
                </select>
              </div>

              <div class="border-t border-slate-200 pt-3">
                <label class="text-[11px] font-bold text-slate-700 flex items-center">
                  <ion-icon name="sparkles" class="text-yellow-500 mr-1"></ion-icon>
                  GG0130E. Shower/Bathe Self (AI-Populated)
                </label>
                <div
                  id="form-GG0130E-answer"
                  class="mt-1 p-2 bg-yellow-50 border-2 border-dashed border-yellow-400 rounded min-h-[40px] form-field-placeholder flex items-center text-slate-600 text-xs"
                >
                  <ion-icon name="sparkles-outline" class="text-yellow-600 mr-2"></ion-icon>
                  LANCE AI has recommendations - Click "Accept" to apply
                </div>
              </div>

              <div>
                <label class="text-[11px] font-bold text-slate-700"
                  >GG0130F. Upper Body Dressing</label
                >
                <select
                  id="GG0130F-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option>06 - Independent</option>
                  <option>05 - Setup or clean-up assistance</option>
                  <option>04 - Supervision or touching assistance</option>
                  <option>03 - Partial/moderate assistance</option>
                  <option>02 - Substantial/maximal assistance</option>
                  <option>01 - Dependent</option>
                  <option>07 - Patient refused</option>
                  <option>09 - Not applicable</option>
                </select>
              </div>

              <div>
                <label class="text-[11px] font-bold text-slate-700"
                  >GG0130G. Lower Body Dressing</label
                >
                <select
                  id="GG0130G-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option>06 - Independent</option>
                  <option>05 - Setup or clean-up assistance</option>
                  <option>04 - Supervision or touching assistance</option>
                  <option>03 - Partial/moderate assistance</option>
                  <option>02 - Substantial/maximal assistance</option>
                  <option>01 - Dependent</option>
                  <option>07 - Patient refused</option>
                  <option>09 - Not applicable</option>
                </select>
              </div>

              <div>
                <label class="text-[11px] font-bold text-slate-700"
                  >GG0130H. Putting on/Taking off Footwear</label
                >
                <select
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option>06 - Independent</option>
                  <option>05 - Setup or clean-up assistance</option>
                  <option>04 - Supervision or touching assistance</option>
                  <option>03 - Partial/moderate assistance</option>
                  <option>02 - Substantial/maximal assistance</option>
                  <option>01 - Dependent</option>
                  <option>07 - Patient refused</option>
                  <option>09 - Not applicable</option>
                </select>
              </div>
            </div>
          </div>

          <!-- FUNCTIONAL ABILITIES: MOBILITY (GG Section) -->
          <div
            (click)="toggleSection('gg-mobility')"
            class="bg-indigo-50 border-l-4 border-indigo-600 px-3 py-2 mb-3 cursor-pointer hover:bg-indigo-100 transition-colors flex items-center justify-between"
          >
            <h3 class="font-bold text-indigo-900 text-xs uppercase tracking-wider">
              GG0170. Mobility (Admission Performance)
            </h3>
            <ion-icon
              [name]="isSectionCollapsed('gg-mobility') ? 'chevron-down' : 'chevron-up'"
              class="text-indigo-900 text-lg"
            ></ion-icon>
          </div>

          <div *ngIf="!isSectionCollapsed('gg-mobility')" class="bg-white border border-slate-300 rounded p-3 mb-4">
            <p class="text-[10px] text-slate-600 mb-3 italic bg-indigo-50 p-2 rounded">
              <strong>Coding:</strong> Code the patient's usual performance at admission. Same
              6-point scale as Self-Care section.
            </p>

            <div class="space-y-3">
              <div>
                <label class="text-[11px] font-bold text-slate-700"
                  >GG0170A. Roll Left and Right</label
                >
                <select
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option>06 - Independent</option>
                  <option>05 - Setup or clean-up assistance</option>
                  <option>04 - Supervision or touching assistance</option>
                  <option>03 - Partial/moderate assistance</option>
                  <option>02 - Substantial/maximal assistance</option>
                  <option>01 - Dependent</option>
                  <option>07 - Patient refused</option>
                  <option>09 - Not applicable</option>
                </select>
              </div>

              <div>
                <label class="text-[11px] font-bold text-slate-700">GG0170B. Sit to Lying</label>
                <select
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option>06 - Independent</option>
                  <option>05 - Setup or clean-up assistance</option>
                  <option>04 - Supervision or touching assistance</option>
                  <option>03 - Partial/moderate assistance</option>
                  <option>02 - Substantial/maximal assistance</option>
                  <option>01 - Dependent</option>
                  <option>07 - Patient refused</option>
                  <option>09 - Not applicable</option>
                </select>
              </div>

              <div>
                <label class="text-[11px] font-bold text-slate-700"
                  >GG0170C. Lying to Sitting on Side of Bed</label
                >
                <select
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option>06 - Independent</option>
                  <option>05 - Setup or clean-up assistance</option>
                  <option>04 - Supervision or touching assistance</option>
                  <option>03 - Partial/moderate assistance</option>
                  <option>02 - Substantial/maximal assistance</option>
                  <option>01 - Dependent</option>
                  <option>07 - Patient refused</option>
                  <option>09 - Not applicable</option>
                </select>
              </div>

              <div>
                <label class="text-[11px] font-bold text-slate-700">GG0170D. Sit to Stand</label>
                <select
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option>06 - Independent</option>
                  <option>05 - Setup or clean-up assistance</option>
                  <option>04 - Supervision or touching assistance</option>
                  <option>03 - Partial/moderate assistance</option>
                  <option>02 - Substantial/maximal assistance</option>
                  <option>01 - Dependent</option>
                  <option>07 - Patient refused</option>
                  <option>09 - Not applicable</option>
                </select>
              </div>

              <div>
                <label class="text-[11px] font-bold text-slate-700"
                  >GG0170E. Chair/Bed-to-Chair Transfer</label
                >
                <select
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option>06 - Independent</option>
                  <option>05 - Setup or clean-up assistance</option>
                  <option>04 - Supervision or touching assistance</option>
                  <option>03 - Partial/moderate assistance</option>
                  <option>02 - Substantial/maximal assistance</option>
                  <option>01 - Dependent</option>
                  <option>07 - Patient refused</option>
                  <option>09 - Not applicable</option>
                </select>
              </div>

              <div>
                <label class="text-[11px] font-bold text-slate-700">GG0170F. Toilet Transfer</label>
                <select
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option>06 - Independent</option>
                  <option>05 - Setup or clean-up assistance</option>
                  <option>04 - Supervision or touching assistance</option>
                  <option>03 - Partial/moderate assistance</option>
                  <option>02 - Substantial/maximal assistance</option>
                  <option>01 - Dependent</option>
                  <option>07 - Patient refused</option>
                  <option>09 - Not applicable</option>
                </select>
              </div>

              <div>
                <label class="text-[11px] font-bold text-slate-700">GG0170G. Car Transfer</label>
                <select
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option>06 - Independent</option>
                  <option>05 - Setup or clean-up assistance</option>
                  <option>04 - Supervision or touching assistance</option>
                  <option>03 - Partial/moderate assistance</option>
                  <option>02 - Substantial/maximal assistance</option>
                  <option>01 - Dependent</option>
                  <option>07 - Patient refused</option>
                  <option>09 - Not applicable</option>
                </select>
              </div>

              <div class="border-t border-slate-200 pt-3">
                <label class="text-[11px] font-bold text-slate-700 flex items-center">
                  <ion-icon name="sparkles" class="text-yellow-500 mr-1"></ion-icon>
                  GG0170I. Walk 10 Feet (AI-Populated)
                </label>
                <div
                  id="form-GG0170I-answer"
                  class="mt-1 p-2 bg-yellow-50 border-2 border-dashed border-yellow-400 rounded min-h-[40px] form-field-placeholder flex items-center text-slate-600 text-xs"
                >
                  <ion-icon name="sparkles-outline" class="text-yellow-600 mr-2"></ion-icon>
                  LANCE AI has recommendations - Click "Accept" to apply
                </div>
              </div>

              <div>
                <label class="text-[11px] font-bold text-slate-700"
                  >GG0170J. Walk 50 Feet with Two Turns</label
                >
                <select
                  id="GG0170J-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option>06 - Independent</option>
                  <option>05 - Setup or clean-up assistance</option>
                  <option>04 - Supervision or touching assistance</option>
                  <option>03 - Partial/moderate assistance</option>
                  <option>02 - Substantial/maximal assistance</option>
                  <option>01 - Dependent</option>
                  <option>07 - Patient refused</option>
                  <option>09 - Not applicable</option>
                </select>
              </div>

              <div>
                <label class="text-[11px] font-bold text-slate-700">GG0170K. Walk 150 Feet</label>
                <select
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option>06 - Independent</option>
                  <option>05 - Setup or clean-up assistance</option>
                  <option>04 - Supervision or touching assistance</option>
                  <option>03 - Partial/moderate assistance</option>
                  <option>02 - Substantial/maximal assistance</option>
                  <option>01 - Dependent</option>
                  <option>07 - Patient refused</option>
                  <option>09 - Not applicable</option>
                </select>
              </div>

              <div>
                <label class="text-[11px] font-bold text-slate-700"
                  >GG0170J. Walking 10 Feet on Uneven Surfaces</label
                >
                <select
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option>06 - Independent</option>
                  <option>05 - Setup or clean-up assistance</option>
                  <option>04 - Supervision or touching assistance</option>
                  <option>03 - Partial/moderate assistance</option>
                  <option>02 - Substantial/maximal assistance</option>
                  <option>01 - Dependent</option>
                  <option>07 - Patient refused</option>
                  <option>09 - Not applicable</option>
                </select>
              </div>

              <div>
                <label class="text-[11px] font-bold text-slate-700">GG0170K. 1 Step (Curb)</label>
                <select
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option>06 - Independent</option>
                  <option>05 - Setup or clean-up assistance</option>
                  <option>04 - Supervision or touching assistance</option>
                  <option>03 - Partial/moderate assistance</option>
                  <option>02 - Substantial/maximal assistance</option>
                  <option>01 - Dependent</option>
                  <option>07 - Patient refused</option>
                  <option>09 - Not applicable</option>
                </select>
              </div>

              <div>
                <label class="text-[11px] font-bold text-slate-700">GG0170L. 4 Steps</label>
                <select
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option>06 - Independent</option>
                  <option>05 - Setup or clean-up assistance</option>
                  <option>04 - Supervision or touching assistance</option>
                  <option>03 - Partial/moderate assistance</option>
                  <option>02 - Substantial/maximal assistance</option>
                  <option>01 - Dependent</option>
                  <option>07 - Patient refused</option>
                  <option>09 - Not applicable</option>
                </select>
              </div>

              <div>
                <label class="text-[11px] font-bold text-slate-700">GG0170M. 12 Steps</label>
                <select
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option>06 - Independent</option>
                  <option>05 - Setup or clean-up assistance</option>
                  <option>04 - Supervision or touching assistance</option>
                  <option>03 - Partial/moderate assistance</option>
                  <option>02 - Substantial/maximal assistance</option>
                  <option>01 - Dependent</option>
                  <option>07 - Patient refused</option>
                  <option>09 - Not applicable</option>
                </select>
              </div>

              <div>
                <label class="text-[11px] font-bold text-slate-700"
                  >GG0170P. Picking up Object from Floor</label
                >
                <select
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option>06 - Independent</option>
                  <option>05 - Setup or clean-up assistance</option>
                  <option>04 - Supervision or touching assistance</option>
                  <option>03 - Partial/moderate assistance</option>
                  <option>02 - Substantial/maximal assistance</option>
                  <option>01 - Dependent</option>
                  <option>07 - Patient refused</option>
                  <option>09 - Not applicable</option>
                </select>
              </div>

              <div>
                <label class="text-[11px] font-bold text-slate-700"
                  >GG0170Q. Wheel 50 Feet with Two Turns</label
                >
                <select
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option>06 - Independent</option>
                  <option>05 - Setup or clean-up assistance</option>
                  <option>04 - Supervision or touching assistance</option>
                  <option>03 - Partial/moderate assistance</option>
                  <option>02 - Substantial/maximal assistance</option>
                  <option>01 - Dependent</option>
                  <option>07 - Patient refused</option>
                  <option>09 - Not applicable</option>
                </select>
                <p class="text-[9px] text-slate-500 mt-1">
                  Complete only if walking items not applicable
                </p>
              </div>

              <div>
                <label class="text-[11px] font-bold text-slate-700">GG0170R. Wheel 150 Feet</label>
                <select
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option>06 - Independent</option>
                  <option>05 - Setup or clean-up assistance</option>
                  <option>04 - Supervision or touching assistance</option>
                  <option>03 - Partial/moderate assistance</option>
                  <option>02 - Substantial/maximal assistance</option>
                  <option>01 - Dependent</option>
                  <option>07 - Patient refused</option>
                  <option>09 - Not applicable</option>
                </select>
                <p class="text-[9px] text-slate-500 mt-1">
                  Complete only if walking items not applicable
                </p>
              </div>
            </div>
          </div>

          <!-- SECTION K: NUTRITIONAL STATUS -->
          <div
            (click)="toggleSection('nutritional')"
            class="bg-amber-50 border-l-4 border-amber-600 px-3 py-2 mb-3 cursor-pointer hover:bg-amber-100 transition-colors flex items-center justify-between"
          >
            <h3 class="font-bold text-amber-900 text-xs uppercase tracking-wider">
              Section K. Nutritional Status
            </h3>
            <ion-icon
              [name]="isSectionCollapsed('nutritional') ? 'chevron-down' : 'chevron-up'"
              class="text-amber-900 text-lg"
            ></ion-icon>
          </div>

          <div *ngIf="!isSectionCollapsed('nutritional')" class="bg-white border border-slate-300 rounded p-3 mb-4">
            <div class="space-y-3">
              <!-- K0520 Nutritional Approaches -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  K0520. Nutritional Approaches (Check all that apply)
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <div class="mt-2 space-y-2">
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="K0520-A" class="mr-2" />
                    <span>A - Parenteral/IV feeding</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="K0520-B" class="mr-2" />
                    <span>B - Feeding tube (nasogastric, G-tube, J-tube, PEG)</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="K0520-C" class="mr-2" />
                    <span>C - Mechanically altered diet</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="K0520-D" class="mr-2" />
                    <span>D - Therapeutic diet</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="K0520-Z" class="mr-2" />
                    <span>Z - None of the above</span>
                  </label>
                </div>
              </div>
            </div>
          </div>

          <!-- SECTION M: INTEGUMENTARY STATUS -->
          <div
            (click)="toggleSection('integumentary')"
            class="bg-pink-50 border-l-4 border-pink-600 px-3 py-2 mb-3 cursor-pointer hover:bg-pink-100 transition-colors flex items-center justify-between"
          >
            <h3 class="font-bold text-pink-900 text-xs uppercase tracking-wider">
              Section M. Integumentary Status
            </h3>
            <ion-icon
              [name]="isSectionCollapsed('integumentary') ? 'chevron-down' : 'chevron-up'"
              class="text-pink-900 text-lg"
            ></ion-icon>
          </div>

          <div *ngIf="!isSectionCollapsed('integumentary')" class="bg-white border border-slate-300 rounded p-3 mb-4">
            <div class="space-y-3">
              <!-- M1306 Pressure Ulcers Present -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  M1306. Does this patient have at least one Unhealed Pressure Ulcer/Injury at Stage 2
                  or Higher?
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <select
                  id="M1306-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - No</option>
                  <option value="1">1 - Yes</option>
                </select>
              </div>

              <!-- M1324 Stage of Most Problematic Pressure Ulcer -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  M1324. Stage of Most Problematic Unhealed Pressure Ulcer/Injury
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <select
                  id="M1324-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="1">1 - Stage 1</option>
                  <option value="2">2 - Stage 2</option>
                  <option value="3">3 - Stage 3</option>
                  <option value="4">4 - Stage 4</option>
                  <option value="A1">A1 - Unstageable: Known but not stageable due to coverage</option>
                  <option value="A2">A2 - Unstageable: Deep tissue injury</option>
                  <option value="NA">NA - No pressure ulcers</option>
                </select>
              </div>

              <!-- M1330 Stasis Ulcer -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  M1330. Does this patient have a Stasis Ulcer?
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <select
                  id="M1330-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - No</option>
                  <option value="1">1 - Yes, unhealed stasis ulcer(s)</option>
                  <option value="2">2 - Yes, healing stasis ulcer(s) but no unhealed</option>
                </select>
              </div>

              <!-- M1334 Status of Most Problematic Stasis Ulcer -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  M1334. Status of Most Problematic Stasis Ulcer
                </label>
                <select
                  id="M1334-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="1">1 - Fully granulating</option>
                  <option value="2">2 - Early/partial granulation</option>
                  <option value="3">3 - Not healing</option>
                  <option value="NA">NA - No stasis ulcer</option>
                </select>
              </div>

              <!-- M1340 Surgical Wound -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  M1340. Does this patient have a Surgical Wound?
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <select
                  id="M1340-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - No</option>
                  <option value="1">1 - Yes, patient has surgical wound</option>
                </select>
              </div>

              <!-- M1342 Status of Most Problematic Surgical Wound -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  M1342. Status of Most Problematic Surgical Wound
                </label>
                <select
                  id="M1342-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - Newly epithelialized</option>
                  <option value="1">1 - Fully granulating</option>
                  <option value="2">2 - Early/partial granulation</option>
                  <option value="3">3 - Not healing</option>
                  <option value="NA">NA - No surgical wound</option>
                </select>
              </div>

              <!-- M1350 Skin Lesions or Open Wounds -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  M1350. Does the patient have a Skin Lesion or Open Wound?
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <select
                  id="M1350-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - No</option>
                  <option value="1">1 - Yes</option>
                </select>
                <p class="text-[9px] text-slate-500 mt-1">
                  Excludes pressure ulcers, stasis ulcers, and surgical wounds
                </p>
              </div>
            </div>
          </div>

          <!-- SECTION M: RESPIRATORY STATUS -->
          <div
            (click)="toggleSection('respiratory')"
            class="bg-sky-50 border-l-4 border-sky-600 px-3 py-2 mb-3 cursor-pointer hover:bg-sky-100 transition-colors flex items-center justify-between"
          >
            <h3 class="font-bold text-sky-900 text-xs uppercase tracking-wider">
              Section M. Respiratory Status
            </h3>
            <ion-icon
              [name]="isSectionCollapsed('respiratory') ? 'chevron-down' : 'chevron-up'"
              class="text-sky-900 text-lg"
            ></ion-icon>
          </div>

          <div *ngIf="!isSectionCollapsed('respiratory')" class="bg-white border border-slate-300 rounded p-3 mb-4">
            <div class="space-y-3">
              <!-- M1400 Dyspnea -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  M1400. When is the patient dyspneic or noticeably Short of Breath?
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <select
                  id="M1400-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - Never, patient is not short of breath</option>
                  <option value="1">1 - When walking more than 20 feet, climbing stairs</option>
                  <option value="2">2 - With moderate exertion (dressing, using commode)</option>
                  <option value="3">3 - With minimal exertion or with agitation</option>
                  <option value="4">4 - At rest (during day or night)</option>
                </select>
              </div>
            </div>
          </div>

          <!-- SECTION M: ELIMINATION STATUS -->
          <div
            (click)="toggleSection('elimination')"
            class="bg-lime-50 border-l-4 border-lime-600 px-3 py-2 mb-3 cursor-pointer hover:bg-lime-100 transition-colors flex items-center justify-between"
          >
            <h3 class="font-bold text-lime-900 text-xs uppercase tracking-wider">
              Section M. Elimination Status
            </h3>
            <ion-icon
              [name]="isSectionCollapsed('elimination') ? 'chevron-down' : 'chevron-up'"
              class="text-lime-900 text-lg"
            ></ion-icon>
          </div>

          <div *ngIf="!isSectionCollapsed('elimination')" class="bg-white border border-slate-300 rounded p-3 mb-4">
            <div class="space-y-3">
              <!-- M1600 UTI -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  M1600. Has this patient been treated for a Urinary Tract Infection in the past 14
                  days?
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <select
                  id="M1600-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - No</option>
                  <option value="1">1 - Yes</option>
                  <option value="NA">NA - Patient on prophylactic treatment</option>
                  <option value="UK">UK - Unknown</option>
                </select>
              </div>

              <!-- M1610 Urinary Incontinence -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  M1610. Urinary Incontinence or Urinary Catheter Presence
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <select
                  id="M1610-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - No incontinence or catheter</option>
                  <option value="1">1 - Patient is incontinent</option>
                  <option value="2">
                    2 - Patient requires catheter (external, indwelling, intermittent, suprapubic)
                  </option>
                </select>
              </div>

              <!-- M1620 Bowel Incontinence -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  M1620. Bowel Incontinence Frequency
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <select
                  id="M1620-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - Very rarely or never has bowel incontinence</option>
                  <option value="1">1 - Less than once weekly</option>
                  <option value="2">2 - One to three times weekly</option>
                  <option value="3">3 - Four to six times weekly</option>
                  <option value="4">4 - On a daily basis</option>
                  <option value="5">5 - More often than once daily</option>
                  <option value="NA">NA - Patient has ostomy for bowel elimination</option>
                  <option value="UK">UK - Unknown</option>
                </select>
              </div>

              <!-- M1630 Ostomy -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  M1630. Ostomy for Bowel Elimination
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <select
                  id="M1630-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - Patient does not have ostomy for bowel elimination</option>
                  <option value="1">
                    1 - Ostomy not related to inpatient stay, no change in regimen
                  </option>
                  <option value="2">
                    2 - Ostomy related to inpatient stay or necessitated change in regimen
                  </option>
                </select>
              </div>
            </div>
          </div>

          <!-- SECTION M: MEDICATIONS -->
          <div
            (click)="toggleSection('medications')"
            class="bg-violet-50 border-l-4 border-violet-600 px-3 py-2 mb-3 cursor-pointer hover:bg-violet-100 transition-colors flex items-center justify-between"
          >
            <h3 class="font-bold text-violet-900 text-xs uppercase tracking-wider">
              Section M. Medications
            </h3>
            <ion-icon
              [name]="isSectionCollapsed('medications') ? 'chevron-down' : 'chevron-up'"
              class="text-violet-900 text-lg"
            ></ion-icon>
          </div>

          <div *ngIf="!isSectionCollapsed('medications')" class="bg-white border border-slate-300 rounded p-3 mb-4">
            <div class="space-y-3">
              <!-- M2001 Drug Regimen Review -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  M2001. Drug Regimen Review
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <p class="text-[10px] text-slate-600 italic mt-1">
                  Does a complete drug regimen review indicate potential clinically significant
                  medication issues?
                </p>
                <select
                  id="M2001-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - No issues found during review</option>
                  <option value="1">1 - Issues found during review</option>
                  <option value="9">9 - No review conducted</option>
                </select>
              </div>

              <!-- M2003 Medication Follow-up -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  M2003. Medication Follow-up
                </label>
                <p class="text-[10px] text-slate-600 italic mt-1">
                  If issues identified in M2001, was follow-up conducted?
                </p>
                <select
                  id="M2003-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - No</option>
                  <option value="1">1 - Yes</option>
                  <option value="NA">NA - No issues found in M2001</option>
                </select>
              </div>

              <!-- M2005 Medication Intervention -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  M2005. Medication Intervention
                </label>
                <p class="text-[10px] text-slate-600 italic mt-1">
                  If issues identified, was medication intervention provided?
                </p>
                <select
                  id="M2005-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - No</option>
                  <option value="1">1 - Yes</option>
                  <option value="NA">NA - No issues found in M2001</option>
                </select>
              </div>

              <!-- M2010 High-Risk Drug Education -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  M2010. Patient/Caregiver High-Risk Drug Education
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <p class="text-[10px] text-slate-600 italic mt-1">
                  Has the patient/caregiver received education on high-risk medications?
                </p>
                <select
                  id="M2010-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - No</option>
                  <option value="1">1 - Yes</option>
                  <option value="NA">NA - Patient not taking any high-risk drugs</option>
                </select>
              </div>

              <!-- M2020 Management of Oral Medications -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  M2020. Management of Oral Medications
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <p class="text-[10px] text-slate-600 italic mt-1">
                  Patient's current ability to prepare and take all oral medications reliably and
                  safely
                </p>
                <select
                  id="M2020-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">
                    0 - Able to independently take correct medication(s) and dosage(s) at correct
                    times
                  </option>
                  <option value="1">
                    1 - Able to take if dosages prepared in advance or using dispensing device
                  </option>
                  <option value="2">2 - Able to take if given reminders at appropriate times</option>
                  <option value="3">3 - Unable to take unless administered by another person</option>
                  <option value="NA">NA - No oral medications prescribed</option>
                </select>
              </div>

              <!-- M2030 Management of Injectable Medications -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  M2030. Management of Injectable Medications
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <p class="text-[10px] text-slate-600 italic mt-1">
                  Patient's ability to prepare and administer injectable medications
                </p>
                <select
                  id="M2030-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">
                    0 - Able to independently take correct injectable at correct times
                  </option>
                  <option value="1">1 - Able to take if syringes prepared in advance</option>
                  <option value="2">
                    2 - Able to take if another person prepares and prompts at correct times
                  </option>
                  <option value="3">3 - Unable to take unless administered by another person</option>
                  <option value="NA">NA - No injectable medications prescribed</option>
                </select>
              </div>
            </div>
          </div>

          <!-- SECTION N: HIGH-RISK DRUG CLASSES -->
          <div
            (click)="toggleSection('high-risk-drugs')"
            class="bg-fuchsia-50 border-l-4 border-fuchsia-600 px-3 py-2 mb-3 cursor-pointer hover:bg-fuchsia-100 transition-colors flex items-center justify-between"
          >
            <h3 class="font-bold text-fuchsia-900 text-xs uppercase tracking-wider">
              Section N. High-Risk Drug Classes
            </h3>
            <ion-icon
              [name]="isSectionCollapsed('high-risk-drugs') ? 'chevron-down' : 'chevron-up'"
              class="text-fuchsia-900 text-lg"
            ></ion-icon>
          </div>

          <div *ngIf="!isSectionCollapsed('high-risk-drugs')" class="bg-white border border-slate-300 rounded p-3 mb-4">
            <p class="text-[10px] text-slate-600 mb-3 italic bg-fuchsia-50 p-2 rounded">
              <strong>N0415. High-Risk Drug Classes:</strong> For each drug class, indicate if
              patient is currently taking and if indication is documented
            </p>

            <div class="space-y-3">
              <div class="grid grid-cols-2 gap-2 text-[10px] font-bold text-slate-700 pb-2 border-b">
                <div>Drug Class</div>
                <div>Currently Taking?</div>
              </div>

              <!-- N0415A Anticoagulant -->
              <div class="grid grid-cols-2 gap-2 items-center">
                <label class="text-xs text-slate-700">N0415A. Anticoagulant</label>
                <select
                  id="N0415A-select"
                  class="px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - No</option>
                  <option value="1">1 - Yes</option>
                </select>
              </div>

              <!-- N0415B Antiplatelet -->
              <div class="grid grid-cols-2 gap-2 items-center">
                <label class="text-xs text-slate-700">N0415B. Antiplatelet</label>
                <select
                  id="N0415B-select"
                  class="px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - No</option>
                  <option value="1">1 - Yes</option>
                </select>
              </div>

              <!-- N0415C Antipsychotic -->
              <div class="grid grid-cols-2 gap-2 items-center">
                <label class="text-xs text-slate-700">N0415C. Antipsychotic</label>
                <select
                  id="N0415C-select"
                  class="px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - No</option>
                  <option value="1">1 - Yes</option>
                </select>
              </div>

              <!-- N0415D Antibiotic -->
              <div class="grid grid-cols-2 gap-2 items-center">
                <label class="text-xs text-slate-700">N0415D. Antibiotic</label>
                <select
                  id="N0415D-select"
                  class="px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - No</option>
                  <option value="1">1 - Yes</option>
                </select>
              </div>

              <!-- N0415E Opioid -->
              <div class="grid grid-cols-2 gap-2 items-center">
                <label class="text-xs text-slate-700">N0415E. Opioid</label>
                <select
                  id="N0415E-select"
                  class="px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - No</option>
                  <option value="1">1 - Yes</option>
                </select>
              </div>

              <!-- N0415F Hypoglycemic -->
              <div class="grid grid-cols-2 gap-2 items-center">
                <label class="text-xs text-slate-700">N0415F. Hypoglycemic (Diabetes medication)</label>
                <select
                  id="N0415F-select"
                  class="px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - No</option>
                  <option value="1">1 - Yes</option>
                </select>
              </div>
            </div>
          </div>

          <!-- SECTION M: CARE MANAGEMENT -->
          <div
            (click)="toggleSection('care-management')"
            class="bg-orange-50 border-l-4 border-orange-600 px-3 py-2 mb-3 cursor-pointer hover:bg-orange-100 transition-colors flex items-center justify-between"
          >
            <h3 class="font-bold text-orange-900 text-xs uppercase tracking-wider">
              Section M. Care Management
            </h3>
            <ion-icon
              [name]="isSectionCollapsed('care-management') ? 'chevron-down' : 'chevron-up'"
              class="text-orange-900 text-lg"
            ></ion-icon>
          </div>

          <div *ngIf="!isSectionCollapsed('care-management')" class="bg-white border border-slate-300 rounded p-3 mb-4">
            <div class="space-y-3">
              <!-- M2102 Types and Sources of Assistance -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  M2102. Types and Sources of Assistance (Check all that apply)
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <div class="mt-2 space-y-2">
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="M2102-ADL" class="mr-2" />
                    <span>ADL assistance</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="M2102-IADL" class="mr-2" />
                    <span>IADL assistance</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="M2102-Med" class="mr-2" />
                    <span>Medication administration</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="M2102-Proc" class="mr-2" />
                    <span>Medical procedures/treatments</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="M2102-Equip" class="mr-2" />
                    <span>Management of complex medical equipment</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="M2102-Advocacy" class="mr-2" />
                    <span>Advocacy or facilitation of patient participation</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="M2102-Financial" class="mr-2" />
                    <span>Financial management</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="M2102-Emotional" class="mr-2" />
                    <span>Emotional/psychological support</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="M2102-None" class="mr-2" />
                    <span>No assistance needed</span>
                  </label>
                </div>
              </div>

              <!-- M2250 Plan of Care Synopsis -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  M2250. Plan of Care Synopsis (Check all that apply)
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <div class="mt-2 space-y-2">
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="M2250-Med" class="mr-2" />
                    <span>Medication management</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="M2250-Nutrition" class="mr-2" />
                    <span>Nutrition/hydration/elimination</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="M2250-Skin" class="mr-2" />
                    <span>Skin care</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="M2250-Pain" class="mr-2" />
                    <span>Pain management</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="M2250-Behavioral" class="mr-2" />
                    <span>Behavioral/psychiatric care</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="M2250-Cardiac" class="mr-2" />
                    <span>Cardiac/circulatory care</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="M2250-Respiratory" class="mr-2" />
                    <span>Respiratory care</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="M2250-Diabetes" class="mr-2" />
                    <span>Diabetes care</span>
                  </label>
                </div>
              </div>

              <!-- M2300 Emergent Care -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  M2300. Emergent Care (Since SOC/ROC)
                </label>
                <p class="text-[10px] text-slate-600 italic mt-1">
                  For follow-up/discharge assessments only
                </p>
                <select
                  id="M2300-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - No</option>
                  <option value="1">1 - Yes, used ER without hospitalization</option>
                  <option value="2">2 - Yes, hospitalized (including ER visit)</option>
                </select>
              </div>

              <!-- M2420 Discharge Disposition -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  M2420. Discharge Disposition
                </label>
                <p class="text-[10px] text-slate-600 italic mt-1">
                  For discharge assessments only
                </p>
                <select
                  id="M2420-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="1">1 - Patient remained in community</option>
                  <option value="2">2 - Patient transferred to noninstitutional hospice</option>
                  <option value="3">3 - Unknown</option>
                </select>
              </div>
            </div>
          </div>

          <!-- SECTION O: SPECIAL TREATMENTS AND PROCEDURES -->
          <div
            (click)="toggleSection('special-treatments')"
            class="bg-emerald-50 border-l-4 border-emerald-600 px-3 py-2 mb-3 cursor-pointer hover:bg-emerald-100 transition-colors flex items-center justify-between"
          >
            <h3 class="font-bold text-emerald-900 text-xs uppercase tracking-wider">
              Section O. Special Treatments and Procedures
            </h3>
            <ion-icon
              [name]="isSectionCollapsed('special-treatments') ? 'chevron-down' : 'chevron-up'"
              class="text-emerald-900 text-lg"
            ></ion-icon>
          </div>

          <div *ngIf="!isSectionCollapsed('special-treatments')" class="bg-white border border-slate-300 rounded p-3 mb-4">
            <div class="space-y-3">
              <!-- O0110 Special Treatments -->
              <div>
                <label class="text-[11px] font-bold text-slate-700">
                  O0110. Special Treatments, Procedures, and Programs (Check all that apply)
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <div class="mt-2 space-y-2 grid grid-cols-2 gap-2">
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="O0110-A1" class="mr-2" />
                    <span>A1 - Parenteral/IV feeding</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="O0110-A2" class="mr-2" />
                    <span>A2 - Enteral feeding</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="O0110-B1" class="mr-2" />
                    <span>B1 - IV medications</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="O0110-B2" class="mr-2" />
                    <span>B2 - IV antibiotics</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="O0110-C1" class="mr-2" />
                    <span>C1 - Oxygen therapy</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="O0110-C2" class="mr-2" />
                    <span>C2 - Ventilator/respirator</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="O0110-D1" class="mr-2" />
                    <span>D1 - Tracheostomy care</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="O0110-E1" class="mr-2" />
                    <span>E1 - Chemotherapy (IV)</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="O0110-E2" class="mr-2" />
                    <span>E2 - Chemotherapy (oral)</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="O0110-F1" class="mr-2" />
                    <span>F1 - Radiation</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="O0110-G1" class="mr-2" />
                    <span>G1 - Dialysis (hemodialysis)</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="O0110-G2" class="mr-2" />
                    <span>G2 - Dialysis (peritoneal)</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="O0110-H1" class="mr-2" />
                    <span>H1 - IV access (peripheral)</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="O0110-H2" class="mr-2" />
                    <span>H2 - IV access (PICC)</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="O0110-H3" class="mr-2" />
                    <span>H3 - IV access (central/port)</span>
                  </label>
                  <label class="flex items-center text-xs">
                    <input type="checkbox" id="O0110-Z" class="mr-2" />
                    <span>Z - None of the above</span>
                  </label>
                </div>
              </div>

              <!-- O0350 COVID-19 Vaccination (NEW in E1) -->
              <div class="border-t-2 border-emerald-300 pt-3 mt-3">
                <label class="text-[11px] font-bold text-slate-700 flex items-center">
                  O0350. Patient's COVID-19 Vaccination is Up to Date
                  <span
                    class="ml-2 px-2 py-0.5 bg-emerald-200 text-emerald-800 text-[9px] font-bold rounded"
                    >NEW in E1</span
                  >
                  <span class="text-red-600 ml-1">*</span>
                </label>
                <p class="text-[10px] text-slate-600 italic mt-1">
                  Per CDC definition for COVID-19 vaccination up to date status
                </p>
                <select
                  id="O0350-select"
                  class="mt-1 block w-full px-2 py-1.5 bg-slate-50 border border-slate-300 rounded text-xs"
                >
                  <option value="">- Select -</option>
                  <option value="0">0 - No</option>
                  <option value="1">1 - Yes</option>
                  <option value="2">2 - Patient is not eligible for COVID-19 vaccination</option>
                  <option value="3">3 - Unknown</option>
                </select>
              </div>
            </div>
          </div>

          <!-- Summary Stats -->
          <div
            class="bg-gradient-to-r from-emerald-50 to-blue-50 border-2 border-emerald-300 rounded-lg p-4 mb-4"
          >
            <h3 class="font-bold text-emerald-900 text-sm mb-3 flex items-center">
              <ion-icon name="analytics-outline" class="mr-2"></ion-icon>
              Assessment Summary
            </h3>
            <div class="space-y-2 text-xs">
              <div class="flex justify-between py-1 border-b border-emerald-200">
                <span class="text-slate-700">Items Completed:</span>
                <span id="summary-items-completed" class="font-bold text-slate-900">0 / 89</span>
              </div>
              <div class="flex justify-between py-1 border-b border-emerald-200">
                <span class="text-slate-700">PDGM Clinical Group:</span>
                <span id="summary-pdgm-group" class="font-bold text-emerald-700">MS-Rehab</span>
              </div>
              <div class="flex justify-between py-1 border-b border-emerald-200">
                <span class="text-slate-700">Comorbidity Tier:</span>
                <span id="summary-comorbidity-tier" class="font-bold text-slate-900">None</span>
              </div>
              <div class="flex justify-between py-1 border-b border-emerald-200">
                <span class="text-slate-700">Functional Level:</span>
                <span class="font-bold text-slate-900">Low</span>
              </div>
              <div class="flex justify-between pt-2 mt-2 border-t-2 border-emerald-400">
                <span class="text-slate-700 font-bold">30-Day Payment Estimate:</span>
                <span id="payment-estimate" class="font-bold text-xl text-emerald-600"
                  >$2,875.50</span
                >
              </div>
              <p class="text-[10px] text-slate-500 italic mt-2">
                *Payment estimates are based on current PDGM grouping and may change with additional
                coding
              </p>
            </div>
          </div>

          <!-- Form Footer -->
          <div class="bg-slate-100 border border-slate-300 rounded p-3 text-[10px] text-slate-600">
            <p class="mb-1"><strong>CMS OASIS-E1 Version</strong> - Effective 01/01/2025</p>
            <p>
              This form must be completed by a qualified clinician and reviewed for accuracy before
              submission to CMS.
            </p>
          </div>
        </div>
      </section>
    </app-oasis-form>
  </main>
</div>

<!-- ========================= MODALS ========================= -->

<!-- PROCESSING OVERLAY -->
<div
  id="save-processing-overlay"
  class="fixed inset-0 bg-slate-900 bg-opacity-90 hidden items-center justify-center z-40 text-white text-center"
>
  <div>
    <svg
      class="animate-spin h-16 w-16 text-white mx-auto"
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
    >
      <circle
        class="opacity-25"
        cx="12"
        cy="12"
        r="10"
        stroke="currentColor"
        stroke-width="4"
      ></circle>
      <path
        class="opacity-75"
        fill="currentColor"
        d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
      ></path>
    </svg>
    <h2 class="text-3xl font-bold mt-8">LANCE AI is Analyzing...</h2>
    <p id="analysis-status" class="text-slate-300 mt-2">
      Validating OASIS data • Running PDGM calculations • Checking compliance
    </p>
    <div class="mt-6 max-w-md mx-auto bg-slate-800 rounded-full h-2">
      <div
        id="analysis-progress-bar"
        class="bg-indigo-500 h-2 rounded-full transition-all"
        style="width: 0%"
      ></div>
    </div>
  </div>
</div>

<!-- ELIGIBILITY MODAL -->
<div
  id="eligibility-modal"
  class="hidden fixed inset-0 bg-slate-900 bg-opacity-50 items-center justify-center z-50"
>
  <div class="bg-white rounded-2xl p-6 max-w-lg w-full mx-4 shadow-2xl">
    <div class="flex items-center justify-between mb-4">
      <div class="flex items-center space-x-3">
        <div class="w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center">
          <ion-icon name="shield-checkmark" class="text-2xl text-emerald-600"></ion-icon>
        </div>
        <h2 class="text-lg font-semibold text-slate-900">Eligibility Verified</h2>
      </div>
      <button (click)="hideModal('eligibility-modal')" class="text-slate-400 hover:text-slate-600">
        <ion-icon name="close" class="text-2xl"></ion-icon>
      </button>
    </div>

    <div class="space-y-4 mb-6">
      <!-- Patient Info -->
      <div class="bg-slate-50 rounded-lg p-4">
        <p class="text-xs text-slate-500 uppercase tracking-wide mb-2">Patient Information</p>

        <div class="mb-4">
          <span
            class="inline-flex items-center px-3 py-1 rounded-full bg-emerald-100 text-emerald-700 text-sm font-bold"
          >
            <span class="w-2 h-2 rounded-full bg-emerald-600 mr-2"></span>
            Primary Payer: Medicare
          </span>
        </div>

        <div class="grid grid-cols-2 gap-3 text-sm">
          <div>
            <p class="text-xs text-slate-500">Name</p>
            <p class="font-semibold text-slate-900">John Smith</p>
          </div>
          <div>
            <p class="text-xs text-slate-500">MRN</p>
            <p class="font-semibold text-slate-900">87654</p>
          </div>
          <div>
            <p class="text-xs text-slate-500">DOB</p>
            <p class="font-semibold text-slate-900">05/12/1948</p>
          </div>
          <div>
            <p class="text-xs text-slate-500">Age</p>
            <p class="font-semibold text-slate-900">76 years</p>
          </div>
        </div>
      </div>

      <!-- Medicare Status -->
      <div class="bg-emerald-50 rounded-lg p-4 border-l-4 border-emerald-500">
        <p class="text-xs text-emerald-700 uppercase tracking-wide mb-2 font-semibold">
          Medicare Status: Active
        </p>
        <div class="space-y-2 text-sm">
          <div class="flex items-center justify-between">
            <span class="text-slate-700">Part A (Hospital Insurance)</span>
            <span class="flex items-center text-emerald-700 font-medium">
              <ion-icon name="checkmark-circle" class="mr-1"></ion-icon>
              Active
            </span>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-slate-700">Part B (Medical Insurance)</span>
            <span class="flex items-center text-emerald-700 font-medium">
              <ion-icon name="checkmark-circle" class="mr-1"></ion-icon>
              Active
            </span>
          </div>
          <div class="text-xs text-slate-600 mt-2 pt-2 border-t border-emerald-200">
            Effective: 01/01/2025 - 12/31/2025
          </div>
        </div>
      </div>

      <!-- Home Health Benefit -->
      <div class="bg-blue-50 rounded-lg p-4 border-l-4 border-blue-500">
        <p class="text-xs text-blue-700 uppercase tracking-wide mb-2 font-semibold">
          Home Health Benefit
        </p>
        <div class="space-y-2 text-sm">
          <div class="flex items-center">
            <ion-icon name="checkmark-circle" class="text-emerald-600 mr-2"></ion-icon>
            <span class="text-slate-700">Available</span>
          </div>
          <div class="flex items-center">
            <ion-icon name="checkmark-circle" class="text-emerald-600 mr-2"></ion-icon>
            <span class="text-slate-700">No prior authorization required</span>
          </div>
          <div class="flex items-center">
            <ion-icon name="checkmark-circle" class="text-emerald-600 mr-2"></ion-icon>
            <span class="text-slate-700"
              >Estimated remaining benefit days: <strong>60</strong></span
            >
          </div>
        </div>
      </div>

      <!-- Verification Details -->
      <div class="text-xs text-slate-500 text-center pt-2">
        <p>Last verified: Just now • Source: CMS Medicare Portal</p>
      </div>
    </div>

    <div class="flex space-x-3">
      <button
        (click)="hideModal('eligibility-modal')"
        class="flex-1 bg-emerald-600 hover:bg-emerald-700 text-white font-medium py-2.5 rounded-lg transition-colors"
      >
        Continue with Assessment
      </button>
      <button
        (click)="recheckEligibility($event)"
        class="px-4 text-emerald-600 hover:text-emerald-700 border border-emerald-600 hover:border-emerald-700 font-medium rounded-lg transition-colors flex items-center"
      >
        <ion-icon name="refresh-outline" class="mr-1"></ion-icon>
        Refresh
      </button>
    </div>
  </div>
</div>

<!-- REJECT RECOMMENDATION MODAL -->
<div
  id="reject-modal"
  class="hidden fixed inset-0 bg-slate-900 bg-opacity-50 items-center justify-center z-50"
>
  <div class="bg-white rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl">
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-lg font-semibold text-slate-900">Reject Recommendation</h2>
      <button (click)="hideModal('reject-modal')" class="text-slate-400 hover:text-slate-600">
        <ion-icon name="close" class="text-2xl"></ion-icon>
      </button>
    </div>

    <div class="mb-6">
      <p class="text-sm text-slate-600 mb-4">
        Are you sure you want to reject this AI recommendation?
      </p>

      <div class="bg-slate-50 rounded-lg p-3 mb-4">
        <p id="reject-modal-title" class="text-sm font-medium text-slate-900"></p>
      </div>

      <div>
        <label class="text-xs font-medium text-slate-700 mb-2 block"> Reason (Optional) </label>
        <textarea
          id="reject-reason"
          rows="3"
          placeholder="Enter reason for rejection..."
          class="w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"
        ></textarea>
      </div>
    </div>

    <div class="flex space-x-3">
      <button
        (click)="confirmRejectRecommendation()"
        class="flex-1 bg-slate-600 hover:bg-slate-700 text-white font-medium py-2.5 rounded-lg transition-colors"
      >
        Confirm Reject
      </button>
      <button
        (click)="hideModal('reject-modal')"
        class="px-6 text-slate-600 hover:text-slate-900 font-medium transition-colors"
      >
        Cancel
      </button>
    </div>
  </div>
</div>

<!-- EXPORT MODAL -->
<div
  id="export-modal"
  class="hidden fixed inset-0 bg-slate-900 bg-opacity-50 items-center justify-center z-50"
>
  <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl">
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-xl font-semibold text-slate-900">Export OASIS Assessment</h2>
      <button (click)="hideModal('export-modal')" class="text-slate-400 hover:text-slate-600">
        <ion-icon name="close" class="text-2xl"></ion-icon>
      </button>
    </div>

    <div class="space-y-4 mb-6">
      <div class="bg-slate-50 rounded-lg p-4">
        <p class="text-sm font-medium text-slate-700 mb-1">Patient: John Smith</p>
        <p class="text-xs text-slate-500">MRN-87654 • Start of Care</p>
      </div>

      <div class="border border-slate-200 rounded-lg p-4">
        <p class="text-xs text-slate-500 mb-1">Est. Payment</p>
        <p class="text-2xl font-bold text-slate-900">${{ currentPayment().toFixed(2) }}</p>
        <p class="text-xs text-slate-500 mt-1">MS-Rehab • High Comorbidity</p>
      </div>

      <div class="text-sm text-slate-600">
        <p class="mb-2"><strong>Export Format:</strong> OASIS XML (v2025.1)</p>
        <p class="text-xs text-slate-500">Ready for submission to CMS via your OASIS system</p>
      </div>
    </div>

    <div class="flex space-x-3">
      <button
        (click)="exportToXML()"
        class="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 rounded-lg transition-colors"
      >
        Download XML
      </button>
      <button
        (click)="hideModal('export-modal')"
        class="px-6 text-slate-600 hover:text-slate-900 font-medium transition-colors"
      >
        Cancel
      </button>
    </div>
  </div>
</div>
